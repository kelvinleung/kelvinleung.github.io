<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="description" content="Kelvin&#x27;s blog"/><link rel="icon" href="/images/favicon.ico"/><title>JSX 与 { 表达式 }</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/e2fd2485305bc9a4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e2fd2485305bc9a4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/5efe62c786a6b4f4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5efe62c786a6b4f4.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-81f4fb35f4507347.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7b4daab53c85f4a6.js" defer=""></script><script src="/_next/static/chunks/323-451496564d94cd92.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bid%5D-3b3abcf05f6a137c.js" defer=""></script><script src="/_next/static/QscD1JBECLwvMxSlY-JD8/_buildManifest.js" defer=""></script><script src="/_next/static/QscD1JBECLwvMxSlY-JD8/_ssgManifest.js" defer=""></script><script src="/_next/static/QscD1JBECLwvMxSlY-JD8/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="container"><nav class="navbar"><div class="navbar-content"><div class="navbar-menu-container"><ul class="navbar-menu"><li><a class="active" href="/">首页</a></li><li><a href="/posts/horse-sense">秘籍</a></li><li><a href="/posts/gibberish">八股</a></li><li><a href="/posts/xray">庖丁</a></li><li><a href="/posts/copycat">画瓢</a></li></ul></div></div></nav><main class="main"><main><article class="post-container"><div class="post-title-container"><h1 class="post-title">JSX 与 { 表达式 }</h1><p class="post-date">MAY 17, 2022</p></div><p>偶然间在一个技术群里看到有人问，为什么在 React 里，处理点击事件的函数还没点击就执行了，而且只执行一次；另外，如果在这个函数外面再套一层箭头函数的话，它又正常了；还有就是在没有参数的情况下，也是正常的。大概就是下面的几种情况：</p>
<div class="code-block-container"><div class="code-block-head"><span>&gt;_&lt;</span><span>jsx</span></div><pre class="prism-code language-jsx"><div class="code-block"><span class="token-line"><span class="token comment">// 只执行一次，并且还没点击就执行了</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Button</span><span class="token tag"> </span><span class="token tag attr-name">onClick</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript function">doSomething</span><span class="token tag script language-javascript punctuation">(</span><span class="token tag script language-javascript">args</span><span class="token tag script language-javascript punctuation">)</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">
</span></span><span class="token-line"><span class="token plain"></span><span class="token comment">// 包一层箭头函数就正常了</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Button</span><span class="token tag"> </span><span class="token tag attr-name">onClick</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">(</span><span class="token tag script language-javascript punctuation">)</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript arrow operator">=&gt;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript function">doSomething</span><span class="token tag script language-javascript punctuation">(</span><span class="token tag script language-javascript">args</span><span class="token tag script language-javascript punctuation">)</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">
</span></span><span class="token-line"><span class="token plain"></span><span class="token comment">// 没有参数的情况下，也是正常的</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Button</span><span class="token tag"> </span><span class="token tag attr-name">onClick</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript">doSomething</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></span></div></pre></div>
<p>这个问题我也曾经遇到过，尤其是对于刚从 Vue 或者习惯写原生转过来写 React 的人来说，的确很容易搞混：</p>
<div class="code-block-container"><div class="code-block-head"><span>&gt;_&lt;</span><span>js</span></div><pre class="prism-code language-js"><div class="code-block"><span class="token-line"><span class="token comment">// 在 Vue 中是正常的</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> @click</span><span class="token operator">=</span><span class="token string">&quot;doSomething(args)&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">
</span></span><span class="token-line"><span class="token plain"></span><span class="token comment">// 在原生中是正常的</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token operator">&lt;</span><span class="token plain">button onclick</span><span class="token operator">=</span><span class="token string">&quot;doSomething(args)&quot;</span><span class="token operator">&gt;</span><span class="token plain">按钮</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">button</span><span class="token operator">&gt;</span><span class="token plain"></span></span></div></pre></div>
<p>那么为什么在 React 里（实际上只是 JSX，与框架无关），第一种写法只执行一次呢？其实这个问题产生的原因很简单，与框架一点关系都没有，只是一个很基础的 JS 问题。</p>
<p>在 React 官方<a href="https://reactjs.org/docs/introducing-jsx.html">介绍 JSX 的文档</a>中有如下一段：</p>
<blockquote>
<p>You can put any valid JavaScript expression inside the curly braces in JSX. For example, <code>2 + 2</code>, <code>user.firstName</code>, or <code>formatName(user)</code> are all valid JavaScript expressions.</p>
</blockquote>
<p>也就是说，JSX 的大括号里需要的是一个“表达式”，即<code>propA={表达式}</code>。而“表达式”和“语句”，是 JS 中两个比较容易混淆的概念。MDN 中对表达式是这样定义的：</p>
<blockquote>
<p>An expression is any valid unit of code that resolves to a value.</p>
</blockquote>
<p>因此，表达式和语句最大的区别，就是能不能计算出一个“值”来。其实 JSX 中<code>onClick={doSomething}</code>的部分，可以看作是一个赋值语句，即把大括号直接去掉：</p>
<div class="code-block-container"><div class="code-block-head"><span>&gt;_&lt;</span><span>js</span></div><pre class="prism-code language-js"><div class="code-block"><span class="token-line"><span class="token comment">// onClick={doSomething} 相当于：</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">onClick </span><span class="token operator">=</span><span class="token plain"> doSomething</span><span class="token punctuation">;</span><span class="token plain"></span></span></div></pre></div>
<p>也就是说在 JSX 中给 props 传值，其实就只是将等号右边，即大括号内的表达式的值，赋给左边的 props 这么简单而已。在上面的例子中就是把<code>onClick</code>指向<code>doSomething</code>这个函数。而当用户点击该组件时，框架会调用<code>onClick()</code>，也就相当于调用<code>doSomething()</code>。</p>
<p>而造成 bug 的原因，往往就是忽略了这是一个赋值的过程，错误地认为点击事件发生后，框架会去执行大括号内的“语句”。尤其对于习惯了 Vue 的人来说，因为在 Vue 的模板语法中，的确是按这个逻辑去执行的。</p>
<p>回到最上面的第一个例子：</p>
<div class="code-block-container"><div class="code-block-head"><span>&gt;_&lt;</span><span>jsx</span></div><pre class="prism-code language-jsx"><div class="code-block"><span class="token-line"><span class="token comment">// 只执行一次，并且还没点击就执行了</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Button</span><span class="token tag"> </span><span class="token tag attr-name">onClick</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript function">doSomething</span><span class="token tag script language-javascript punctuation">(</span><span class="token tag script language-javascript">args</span><span class="token tag script language-javascript punctuation">)</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></span></div></pre></div>
<p>这里之所以会执行一次，是因为在渲染的过程中，直接调用了<code>doSomething(args)</code>，并将其返回值赋值给了<code>onClick</code>。因此，在用户点击之前，事件处理的方法就已经被调用了。假设该方法并没有返回值，则<code>onClick</code>的值为<code>undefined</code>。</p>
<p>后续当用户点击该组件时，框架调用<code>onClick()</code>，并不会再次执行<code>doSomething()</code>方法。这是因为<code>onClick</code>的值为<code>undefined</code>，React 对其进行了防呆的处理，直接忽略而并不会在实际的 DOM 上添加事件监听。</p>
<div class="code-block-container"><div class="code-block-head"><span>&gt;_&lt;</span><span>js</span></div><pre class="prism-code language-js"><div class="code-block"><span class="token-line"><span class="token comment">/*</span></span><span class="token-line"><span class="token comment">  packages/react-dom/src/events/getListener.js</span></span><span class="token-line"><span class="token comment">  getListener() 方法中</span></span><span class="token-line"><span class="token comment">*/</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">listener </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> listener </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">    </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Expected \`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">registrationName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">\` listener to be a function, instead got a value of \`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation keyword">typeof</span><span class="token template-string interpolation"> listener</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">\` type.</span><span class="token template-string template-punctuation string">`</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">
</span></span><span class="token-line"><span class="token plain"></span><span class="token comment">/*</span></span><span class="token-line"><span class="token comment">  packages/react-dom/src/events/DOMPluginEventSystem.js</span></span><span class="token-line"><span class="token comment">  accumulateSinglePhaseListeners() 方法中</span></span><span class="token-line"><span class="token comment">*/</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token comment">// Standard React on* listeners, i.e. onClick or onClickCapture</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">reactEventName </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> listener </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">getListener</span><span class="token punctuation">(</span><span class="token plain">instance</span><span class="token punctuation">,</span><span class="token plain"> reactEventName</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">listener </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">    listeners</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">      </span><span class="token function">createDispatchListener</span><span class="token punctuation">(</span><span class="token plain">instance</span><span class="token punctuation">,</span><span class="token plain"> listener</span><span class="token punctuation">,</span><span class="token plain"> lastHostComponent</span><span class="token punctuation">)</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>当我们传给 React 自带的合成事件（SyntheticEvent）的值不是一个函数时，框架将会报错。而如果传的值为 falsy，则该事件并不会被监听，直接忽略。</p>
<h2>小结</h2>
<p>JSX 的大括号里面要写“表达式”，对于事件来说，要的值是函数。<code>() =&gt; doSomething(args)</code>和<code>doSomething</code>都是函数，在事件触发的时候，调用的是事件（如<code>onClick()</code>)，而不是写在大括号里的“语句”。</p></article></main></main><footer><div>Build with ♥ @GZ</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"JSX 与 { 表达式 }","date":"MAY 17, 2022","desc":"偶然间在一个技术群里看到有人问，为什么在 React 里，处理点击事件的函数还没点击就执行了，而且只执行一次；另外，如果在这个函数外面再套一层箭头函数的话，它又正常了；还有就是在没有参数的情况下，也是正常的。","type":"gibberish"},"code":"var Component=(()=\u003e{var a=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var m=(c,t)=\u003e()=\u003e(t||c((t={exports:{}}).exports,t),t.exports),S=(c,t)=\u003e{for(var o in t)r(c,o,{get:t[o],enumerable:!0})},l=(c,t,o,n)=\u003e{if(t\u0026\u0026typeof t==\"object\"||typeof t==\"function\")for(let i of p(t))!u.call(c,i)\u0026\u0026i!==o\u0026\u0026r(c,i,{get:()=\u003et[i],enumerable:!(n=h(t,i))||n.enumerable});return c};var k=(c,t,o)=\u003e(o=c!=null?a(g(c)):{},l(t||!c||!c.__esModule?r(o,\"default\",{value:c,enumerable:!0}):o,c)),f=c=\u003el(r({},\"__esModule\",{value:!0}),c);var s=m((J,d)=\u003e{d.exports=_jsx_runtime});var v={};S(v,{default:()=\u003ej,frontmatter:()=\u003eC});var e=k(s()),C={title:\"JSX \\u4E0E { \\u8868\\u8FBE\\u5F0F }\",date:\"MAY 17, 2022\",desc:\"\\u5076\\u7136\\u95F4\\u5728\\u4E00\\u4E2A\\u6280\\u672F\\u7FA4\\u91CC\\u770B\\u5230\\u6709\\u4EBA\\u95EE\\uFF0C\\u4E3A\\u4EC0\\u4E48\\u5728 React \\u91CC\\uFF0C\\u5904\\u7406\\u70B9\\u51FB\\u4E8B\\u4EF6\\u7684\\u51FD\\u6570\\u8FD8\\u6CA1\\u70B9\\u51FB\\u5C31\\u6267\\u884C\\u4E86\\uFF0C\\u800C\\u4E14\\u53EA\\u6267\\u884C\\u4E00\\u6B21\\uFF1B\\u53E6\\u5916\\uFF0C\\u5982\\u679C\\u5728\\u8FD9\\u4E2A\\u51FD\\u6570\\u5916\\u9762\\u518D\\u5957\\u4E00\\u5C42\\u7BAD\\u5934\\u51FD\\u6570\\u7684\\u8BDD\\uFF0C\\u5B83\\u53C8\\u6B63\\u5E38\\u4E86\\uFF1B\\u8FD8\\u6709\\u5C31\\u662F\\u5728\\u6CA1\\u6709\\u53C2\\u6570\\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4E5F\\u662F\\u6B63\\u5E38\\u7684\\u3002\",type:\"gibberish\"};function x(c={}){let{wrapper:t}=c.components||{};return t?(0,e.jsx)(t,Object.assign({},c,{children:(0,e.jsx)(o,{})})):o();function o(){let n=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",a:\"a\",blockquote:\"blockquote\",h2:\"h2\"},c.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\u5076\\u7136\\u95F4\\u5728\\u4E00\\u4E2A\\u6280\\u672F\\u7FA4\\u91CC\\u770B\\u5230\\u6709\\u4EBA\\u95EE\\uFF0C\\u4E3A\\u4EC0\\u4E48\\u5728 React \\u91CC\\uFF0C\\u5904\\u7406\\u70B9\\u51FB\\u4E8B\\u4EF6\\u7684\\u51FD\\u6570\\u8FD8\\u6CA1\\u70B9\\u51FB\\u5C31\\u6267\\u884C\\u4E86\\uFF0C\\u800C\\u4E14\\u53EA\\u6267\\u884C\\u4E00\\u6B21\\uFF1B\\u53E6\\u5916\\uFF0C\\u5982\\u679C\\u5728\\u8FD9\\u4E2A\\u51FD\\u6570\\u5916\\u9762\\u518D\\u5957\\u4E00\\u5C42\\u7BAD\\u5934\\u51FD\\u6570\\u7684\\u8BDD\\uFF0C\\u5B83\\u53C8\\u6B63\\u5E38\\u4E86\\uFF1B\\u8FD8\\u6709\\u5C31\\u662F\\u5728\\u6CA1\\u6709\\u53C2\\u6570\\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4E5F\\u662F\\u6B63\\u5E38\\u7684\\u3002\\u5927\\u6982\\u5C31\\u662F\\u4E0B\\u9762\\u7684\\u51E0\\u79CD\\u60C5\\u51B5\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",metaString:\"hellotest\",children:`// \\u53EA\\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u5E76\\u4E14\\u8FD8\\u6CA1\\u70B9\\u51FB\\u5C31\\u6267\\u884C\\u4E86\n\u003cButton onClick={doSomething(args)} /\u003e\n\n// \\u5305\\u4E00\\u5C42\\u7BAD\\u5934\\u51FD\\u6570\\u5C31\\u6B63\\u5E38\\u4E86\n\u003cButton onClick={() =\u003e doSomething(args)} /\u003e\n\n// \\u6CA1\\u6709\\u53C2\\u6570\\u7684\\u60C5\\u51B5\\u4E0B\\uFF0C\\u4E5F\\u662F\\u6B63\\u5E38\\u7684\n\u003cButton onClick={doSomething} /\u003e\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u8FD9\\u4E2A\\u95EE\\u9898\\u6211\\u4E5F\\u66FE\\u7ECF\\u9047\\u5230\\u8FC7\\uFF0C\\u5C24\\u5176\\u662F\\u5BF9\\u4E8E\\u521A\\u4ECE Vue \\u6216\\u8005\\u4E60\\u60EF\\u5199\\u539F\\u751F\\u8F6C\\u8FC7\\u6765\\u5199 React \\u7684\\u4EBA\\u6765\\u8BF4\\uFF0C\\u7684\\u786E\\u5F88\\u5BB9\\u6613\\u641E\\u6DF7\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`// \\u5728 Vue \\u4E2D\\u662F\\u6B63\\u5E38\\u7684\n\u003cButton @click=\"doSomething(args)\" /\u003e\n\n// \\u5728\\u539F\\u751F\\u4E2D\\u662F\\u6B63\\u5E38\\u7684\n\u003cbutton onclick=\"doSomething(args)\"\u003e\\u6309\\u94AE\u003c/button\u003e\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u90A3\\u4E48\\u4E3A\\u4EC0\\u4E48\\u5728 React \\u91CC\\uFF08\\u5B9E\\u9645\\u4E0A\\u53EA\\u662F JSX\\uFF0C\\u4E0E\\u6846\\u67B6\\u65E0\\u5173\\uFF09\\uFF0C\\u7B2C\\u4E00\\u79CD\\u5199\\u6CD5\\u53EA\\u6267\\u884C\\u4E00\\u6B21\\u5462\\uFF1F\\u5176\\u5B9E\\u8FD9\\u4E2A\\u95EE\\u9898\\u4EA7\\u751F\\u7684\\u539F\\u56E0\\u5F88\\u7B80\\u5355\\uFF0C\\u4E0E\\u6846\\u67B6\\u4E00\\u70B9\\u5173\\u7CFB\\u90FD\\u6CA1\\u6709\\uFF0C\\u53EA\\u662F\\u4E00\\u4E2A\\u5F88\\u57FA\\u7840\\u7684 JS \\u95EE\\u9898\\u3002\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u5728 React \\u5B98\\u65B9\",(0,e.jsx)(n.a,{href:\"https://reactjs.org/docs/introducing-jsx.html\",children:\"\\u4ECB\\u7ECD JSX \\u7684\\u6587\\u6863\"}),\"\\u4E2D\\u6709\\u5982\\u4E0B\\u4E00\\u6BB5\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"You can put any valid JavaScript expression inside the curly braces in JSX. For example, \",(0,e.jsx)(n.code,{children:\"2 + 2\"}),\", \",(0,e.jsx)(n.code,{children:\"user.firstName\"}),\", or \",(0,e.jsx)(n.code,{children:\"formatName(user)\"}),\" are all valid JavaScript expressions.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E5F\\u5C31\\u662F\\u8BF4\\uFF0CJSX \\u7684\\u5927\\u62EC\\u53F7\\u91CC\\u9700\\u8981\\u7684\\u662F\\u4E00\\u4E2A\\u201C\\u8868\\u8FBE\\u5F0F\\u201D\\uFF0C\\u5373\",(0,e.jsx)(n.code,{children:\"propA={\\u8868\\u8FBE\\u5F0F}\"}),\"\\u3002\\u800C\\u201C\\u8868\\u8FBE\\u5F0F\\u201D\\u548C\\u201C\\u8BED\\u53E5\\u201D\\uFF0C\\u662F JS \\u4E2D\\u4E24\\u4E2A\\u6BD4\\u8F83\\u5BB9\\u6613\\u6DF7\\u6DC6\\u7684\\u6982\\u5FF5\\u3002MDN \\u4E2D\\u5BF9\\u8868\\u8FBE\\u5F0F\\u662F\\u8FD9\\u6837\\u5B9A\\u4E49\\u7684\\uFF1A\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"An expression is any valid unit of code that resolves to a value.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u56E0\\u6B64\\uFF0C\\u8868\\u8FBE\\u5F0F\\u548C\\u8BED\\u53E5\\u6700\\u5927\\u7684\\u533A\\u522B\\uFF0C\\u5C31\\u662F\\u80FD\\u4E0D\\u80FD\\u8BA1\\u7B97\\u51FA\\u4E00\\u4E2A\\u201C\\u503C\\u201D\\u6765\\u3002\\u5176\\u5B9E JSX \\u4E2D\",(0,e.jsx)(n.code,{children:\"onClick={doSomething}\"}),\"\\u7684\\u90E8\\u5206\\uFF0C\\u53EF\\u4EE5\\u770B\\u4F5C\\u662F\\u4E00\\u4E2A\\u8D4B\\u503C\\u8BED\\u53E5\\uFF0C\\u5373\\u628A\\u5927\\u62EC\\u53F7\\u76F4\\u63A5\\u53BB\\u6389\\uFF1A\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`// onClick={doSomething} \\u76F8\\u5F53\\u4E8E\\uFF1A\nonClick = doSomething;\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u4E5F\\u5C31\\u662F\\u8BF4\\u5728 JSX \\u4E2D\\u7ED9 props \\u4F20\\u503C\\uFF0C\\u5176\\u5B9E\\u5C31\\u53EA\\u662F\\u5C06\\u7B49\\u53F7\\u53F3\\u8FB9\\uFF0C\\u5373\\u5927\\u62EC\\u53F7\\u5185\\u7684\\u8868\\u8FBE\\u5F0F\\u7684\\u503C\\uFF0C\\u8D4B\\u7ED9\\u5DE6\\u8FB9\\u7684 props \\u8FD9\\u4E48\\u7B80\\u5355\\u800C\\u5DF2\\u3002\\u5728\\u4E0A\\u9762\\u7684\\u4F8B\\u5B50\\u4E2D\\u5C31\\u662F\\u628A\",(0,e.jsx)(n.code,{children:\"onClick\"}),\"\\u6307\\u5411\",(0,e.jsx)(n.code,{children:\"doSomething\"}),\"\\u8FD9\\u4E2A\\u51FD\\u6570\\u3002\\u800C\\u5F53\\u7528\\u6237\\u70B9\\u51FB\\u8BE5\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u6846\\u67B6\\u4F1A\\u8C03\\u7528\",(0,e.jsx)(n.code,{children:\"onClick()\"}),\"\\uFF0C\\u4E5F\\u5C31\\u76F8\\u5F53\\u4E8E\\u8C03\\u7528\",(0,e.jsx)(n.code,{children:\"doSomething()\"}),\"\\u3002\"]}),`\n`,(0,e.jsx)(n.p,{children:\"\\u800C\\u9020\\u6210 bug \\u7684\\u539F\\u56E0\\uFF0C\\u5F80\\u5F80\\u5C31\\u662F\\u5FFD\\u7565\\u4E86\\u8FD9\\u662F\\u4E00\\u4E2A\\u8D4B\\u503C\\u7684\\u8FC7\\u7A0B\\uFF0C\\u9519\\u8BEF\\u5730\\u8BA4\\u4E3A\\u70B9\\u51FB\\u4E8B\\u4EF6\\u53D1\\u751F\\u540E\\uFF0C\\u6846\\u67B6\\u4F1A\\u53BB\\u6267\\u884C\\u5927\\u62EC\\u53F7\\u5185\\u7684\\u201C\\u8BED\\u53E5\\u201D\\u3002\\u5C24\\u5176\\u5BF9\\u4E8E\\u4E60\\u60EF\\u4E86 Vue \\u7684\\u4EBA\\u6765\\u8BF4\\uFF0C\\u56E0\\u4E3A\\u5728 Vue \\u7684\\u6A21\\u677F\\u8BED\\u6CD5\\u4E2D\\uFF0C\\u7684\\u786E\\u662F\\u6309\\u8FD9\\u4E2A\\u903B\\u8F91\\u53BB\\u6267\\u884C\\u7684\\u3002\"}),`\n`,(0,e.jsx)(n.p,{children:\"\\u56DE\\u5230\\u6700\\u4E0A\\u9762\\u7684\\u7B2C\\u4E00\\u4E2A\\u4F8B\\u5B50\\uFF1A\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-jsx\",children:`// \\u53EA\\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u5E76\\u4E14\\u8FD8\\u6CA1\\u70B9\\u51FB\\u5C31\\u6267\\u884C\\u4E86\n\u003cButton onClick={doSomething(args)} /\u003e\n`})}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u8FD9\\u91CC\\u4E4B\\u6240\\u4EE5\\u4F1A\\u6267\\u884C\\u4E00\\u6B21\\uFF0C\\u662F\\u56E0\\u4E3A\\u5728\\u6E32\\u67D3\\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u76F4\\u63A5\\u8C03\\u7528\\u4E86\",(0,e.jsx)(n.code,{children:\"doSomething(args)\"}),\"\\uFF0C\\u5E76\\u5C06\\u5176\\u8FD4\\u56DE\\u503C\\u8D4B\\u503C\\u7ED9\\u4E86\",(0,e.jsx)(n.code,{children:\"onClick\"}),\"\\u3002\\u56E0\\u6B64\\uFF0C\\u5728\\u7528\\u6237\\u70B9\\u51FB\\u4E4B\\u524D\\uFF0C\\u4E8B\\u4EF6\\u5904\\u7406\\u7684\\u65B9\\u6CD5\\u5C31\\u5DF2\\u7ECF\\u88AB\\u8C03\\u7528\\u4E86\\u3002\\u5047\\u8BBE\\u8BE5\\u65B9\\u6CD5\\u5E76\\u6CA1\\u6709\\u8FD4\\u56DE\\u503C\\uFF0C\\u5219\",(0,e.jsx)(n.code,{children:\"onClick\"}),\"\\u7684\\u503C\\u4E3A\",(0,e.jsx)(n.code,{children:\"undefined\"}),\"\\u3002\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"\\u540E\\u7EED\\u5F53\\u7528\\u6237\\u70B9\\u51FB\\u8BE5\\u7EC4\\u4EF6\\u65F6\\uFF0C\\u6846\\u67B6\\u8C03\\u7528\",(0,e.jsx)(n.code,{children:\"onClick()\"}),\"\\uFF0C\\u5E76\\u4E0D\\u4F1A\\u518D\\u6B21\\u6267\\u884C\",(0,e.jsx)(n.code,{children:\"doSomething()\"}),\"\\u65B9\\u6CD5\\u3002\\u8FD9\\u662F\\u56E0\\u4E3A\",(0,e.jsx)(n.code,{children:\"onClick\"}),\"\\u7684\\u503C\\u4E3A\",(0,e.jsx)(n.code,{children:\"undefined\"}),\"\\uFF0CReact \\u5BF9\\u5176\\u8FDB\\u884C\\u4E86\\u9632\\u5446\\u7684\\u5904\\u7406\\uFF0C\\u76F4\\u63A5\\u5FFD\\u7565\\u800C\\u5E76\\u4E0D\\u4F1A\\u5728\\u5B9E\\u9645\\u7684 DOM \\u4E0A\\u6DFB\\u52A0\\u4E8B\\u4EF6\\u76D1\\u542C\\u3002\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-js\",children:`/*\n  packages/react-dom/src/events/getListener.js\n  getListener() \\u65B9\\u6CD5\\u4E2D\n*/\nif (listener \u0026\u0026 typeof listener !== \"function\") {\n  throw new Error(\n    \\`Expected \\\\\\`\\${registrationName}\\\\\\` listener to be a function, instead got a value of \\\\\\`\\${typeof listener}\\\\\\` type.\\`\n  );\n}\n\n/*\n  packages/react-dom/src/events/DOMPluginEventSystem.js\n  accumulateSinglePhaseListeners() \\u65B9\\u6CD5\\u4E2D\n*/\n// Standard React on* listeners, i.e. onClick or onClickCapture\nif (reactEventName !== null) {\n  const listener = getListener(instance, reactEventName);\n  if (listener != null) {\n    listeners.push(\n      createDispatchListener(instance, listener, lastHostComponent)\n    );\n  }\n}\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"\\u5F53\\u6211\\u4EEC\\u4F20\\u7ED9 React \\u81EA\\u5E26\\u7684\\u5408\\u6210\\u4E8B\\u4EF6\\uFF08SyntheticEvent\\uFF09\\u7684\\u503C\\u4E0D\\u662F\\u4E00\\u4E2A\\u51FD\\u6570\\u65F6\\uFF0C\\u6846\\u67B6\\u5C06\\u4F1A\\u62A5\\u9519\\u3002\\u800C\\u5982\\u679C\\u4F20\\u7684\\u503C\\u4E3A falsy\\uFF0C\\u5219\\u8BE5\\u4E8B\\u4EF6\\u5E76\\u4E0D\\u4F1A\\u88AB\\u76D1\\u542C\\uFF0C\\u76F4\\u63A5\\u5FFD\\u7565\\u3002\"}),`\n`,(0,e.jsx)(n.h2,{children:\"\\u5C0F\\u7ED3\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"JSX \\u7684\\u5927\\u62EC\\u53F7\\u91CC\\u9762\\u8981\\u5199\\u201C\\u8868\\u8FBE\\u5F0F\\u201D\\uFF0C\\u5BF9\\u4E8E\\u4E8B\\u4EF6\\u6765\\u8BF4\\uFF0C\\u8981\\u7684\\u503C\\u662F\\u51FD\\u6570\\u3002\",(0,e.jsx)(n.code,{children:\"() =\u003e doSomething(args)\"}),\"\\u548C\",(0,e.jsx)(n.code,{children:\"doSomething\"}),\"\\u90FD\\u662F\\u51FD\\u6570\\uFF0C\\u5728\\u4E8B\\u4EF6\\u89E6\\u53D1\\u7684\\u65F6\\u5019\\uFF0C\\u8C03\\u7528\\u7684\\u662F\\u4E8B\\u4EF6\\uFF08\\u5982\",(0,e.jsx)(n.code,{children:\"onClick()\"}),\")\\uFF0C\\u800C\\u4E0D\\u662F\\u5199\\u5728\\u5927\\u62EC\\u53F7\\u91CC\\u7684\\u201C\\u8BED\\u53E5\\u201D\\u3002\"]})]})}}var j=x;return f(v);})();\n;return Component;"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"expression-in-jsx"},"buildId":"QscD1JBECLwvMxSlY-JD8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>