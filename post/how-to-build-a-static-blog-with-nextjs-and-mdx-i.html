<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="description" content="Kelvin&#x27;s blog"/><link rel="icon" href="/images/favicon.ico"/><title>使用 Next.js 与 MDX 搭建一个静态博客（一）</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/90fcd0f4d638a169.css" as="style"/><link rel="stylesheet" href="/_next/static/css/90fcd0f4d638a169.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e9e30af88e81fae5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e9e30af88e81fae5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-cf80afe0fcf9a721.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d6e5713b8459b479.js" defer=""></script><script src="/_next/static/chunks/259-40724c9c857ae4fb.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bid%5D-95d4c0924337a51d.js" defer=""></script><script src="/_next/static/5gWJ-3w7KsPABD87B5u4P/_buildManifest.js" defer=""></script><script src="/_next/static/5gWJ-3w7KsPABD87B5u4P/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="max-w-[800px] min-h-screen pt-16 m-auto flex flex-col"><nav class="fixed inset-x-0 top-0 z-50 bg-white shadow-sm"><div class="max-w-[800px] px-6 py-2 m-auto flex justify-between items-center"><a class="navbar__menu-item text-neutral-800 font-bold" href="/">&lt;般若阁 /&gt;</a><button class="navbar__menu-item sm:hidden">机关</button></div></nav><main class="p-6 flex flex-col grow"><main><article><div class="mt-8 mb-16"><h1 class="my-4 text-2xl text-neutral-800 font-bold">使用 Next.js 与 MDX 搭建一个静态博客（一）</h1><p class="text-sm text-neutral-400">OCT 22, 2021</p></div><div class="post-content leading-loose text-neutral-600"><blockquote>
<p>&quot;In some ways, programming is like painting. You start with a blank canvas and certain basic raw materials. You use a combination of science, art, and craft to determine what to do with them.&quot;<br/><br/>-- Andrew Hunt</p>
</blockquote>
<h2>Why?</h2>
<p>花了几天时间，重新搭了一个 blog。考虑到之前一直在写 Vue，这次想换 React 练练手，调研了一堆轮子后，花了九牛二虎之力才最终定下来，用 <a href="https://nextjs.org/">Next.js</a> 和 <a href="https://mdxjs.com/">MDX</a> 来搭。过程中遇到了无数个坑，总结得到了这篇文章。</p>
<p>之所以选择 Next.js 加 MDX，主要是考虑以下几个需求：</p>
<ul>
<li>基于 React，方便练手</li>
<li>基于 Markdown，不用解释了吧</li>
<li>页面、主题能随便改，最好能从零开始</li>
<li>最终打包成静态页面，方便直接丢到 Github Pages 上</li>
<li>有脚手架，项目配置简单</li>
</ul>
<p>上述几个需求，Next.js 都能完美满足，整个开发体验也是相当优秀，跟着文档走一遍基本就能搭出来。剩下的就是找各种优化的插件，以及无休止地修改页面样式。</p>
<div class="TicTacToe_game__mj0jL"><div class="TicTacToe_board__3JryJ"><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button><button class="TicTacToe_square__vGVnH"></button></div><p>Next Player: X</p><button class="TicTacToe_resetButton__1jf3G">重新开始</button></div>
<p>项目最开始搭建的时候，本来打算主要写写文章，所以用的是纯 MD 来写。后来发现了<a href="https://www.joshwcomeau.com/">这个网站</a>，里头的<a href="https://www.joshwcomeau.com/blog/how-i-built-my-blog/">这篇文章</a>有介绍作者是怎样搭建他的 blog 的，用到的是 MDX。其实 MDX 就是能在 MD 文件里插入 React 的组件，是 MD 的拓展。当时我想，如果在文章里加一些自定义的组件，用来做演示，效果应该挺好的，就像上面的<code>TicTacToe</code>组件。</p>
<p>Next.js 集成 MDX 有相当多方案，并且每个都有坑。<a href="https://dev.to/tylerlwsmith/quick-comparison-of-mdx-integration-strategies-with-next-js-1kcm">这篇文章</a>有简单的对比，感兴趣的可以了解一下。一开始我尝试用<code>mdx-bundler</code>来解释 MDX 文件，第一版出来的效果还行，只是卡在了生成目录上。后面发现 <a href="https://beta.reactjs.org/">React 的文档</a>居然更新了，同样是基于 Next.js 和 MDX。于是我赶紧 clone 下来，发现他们用的是<code>@mdx-js/loader</code>。折腾了一番之后，我最终还是换回了<code>mdx-bundler</code>。</p>
<h2>How?</h2>
<h3>第一步：先跑起来再说</h3>
<p>其实 Next.js 官方有一个比较完整的<a href="https://nextjs.org/learn/basics/create-nextjs-app">新手教程</a>，跟着它走完，就可以把一个基于 markdown 的 blog 跑起来。或者通过<a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter">这个模板</a>也可以达到同样的效果。然而，作为练手项目，当然得从零开始，重新造个轮子。</p>
<p>先通过下面的命令，得到一个“纯净版”的 next app：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-bash"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token function">yarn</span><span class="token plain"> create next-app my-blog</span></span></div></pre></div>
<p>进入项目根目录并运行<code>yarn dev</code>后访问<code>http://localhost:3000</code>，如果能看到下面的页面，就证明项目已经顺利跑起来了。</p>
<p><img src="/images/how-to-build-a-static-blog-with-nextjs-and-mdx-i/welcome-screen.png" alt="脚手架首页"/></p>
<p>此时项目的目录结构是这样的：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-bash"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token plain">pages/  </span><span class="token comment"># 目录中的 js 文件将被解析生成页面</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- _app.js  </span><span class="token comment"># 全局布局、样式在这里设置</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- index.js  </span><span class="token comment"># 通过 http://yoursite/ 来访问</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- api/  </span><span class="token comment"># API 路由，可以用来实现 severless 函数</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain">     </span><span class="token operator">|</span><span class="token plain">--- hello.js  </span><span class="token comment"># 通过 http://yoursite/api/hello 来访问，用不到，可忽略</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain">public/  </span><span class="token comment"># 放图片、图标等静态资源</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">styles/  </span><span class="token comment"># 放 css 文件</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">next.config.js  </span><span class="token comment"># Next.js 的配置文件</span><span class="token plain"></span></span></div></pre></div>
<p>上面看到的首页，其实就是<code>pages/index.js</code>里的东西。Next.js 开箱即支持页面路由，不需要繁琐地配置 React Router，仅需要在<code>pages/</code>目录下新增一个文件，比如<code>pages/about.js</code>，并在里面导出一个组件，如：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>pages/about.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">About</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">h1</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Hello</span><span class="token plain"> </span><span class="token maybe-class-name">World</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">h1</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>然后就可以通过<code>http://localhost:3000/about</code>来访问这个页面了，简单到令人发指！</p>
<p>整个<code>pages/</code>目录就相当于一个路由表，当需要增加页面路由时，在相应的目录下新建文件即可。我们的文章以 MDX 文件的形式放在<code>posts/</code>目录中。通过“动态”的方式生成，页面的解析逻辑写在<code>pages/post/[id].js</code>文件中，通过链接<code>http://localhost:3000/post/:id</code>来访问相应的文章，具体配置后面会说。</p>
<p>要注意的是，默认情况下，Next.js 只会解析 JS 文件，需要在<code>next.config.js</code>文件中修改配置来支持更多文件类型：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>next.config.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain">  </span><span class="token literal-property property">pageExtensions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;jsx&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;md&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;mdx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></span></div></pre></div>
<p>除此之外，并不是所有在<code>pages/</code>目录下的文件都会被解析生成页面，例外的有<code>api/</code>目录及<code>_app.js</code>。其中<code>api/</code>目录主要用于 severless 函数，暂时用不上，可以整个删掉完全忽略。而<code>pages/_app.js</code>这个文件，可以用来进行一些全局的配置。默认生成的<code>pages/_app.js</code>文件内容如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>pages/_app.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">MyApp</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Component</span><span class="token parameter punctuation">,</span><span class="token parameter"> pageProps </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token plain">pageProps</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token maybe-class-name">MyApp</span><span class="token punctuation">;</span><span class="token plain"></span></span></div></pre></div>
<p>类比 React Router，<code>MyApp</code>相当于那个被<code>BrowserRouter</code>包裹的“全局”组件。传给它的<code>Component</code>组件，则对应了<code>pages/</code>目录下每一个将要被解析的文件中默认导出的组件，相当于每个<code>Route</code>。如解析<code>pages/about.js</code>这个文件时，<code>Component = Aboubt</code>，<code>/about</code>这个路由就指向了<code>About</code>组件。</p>
<p>此时，项目的目录结构调整为：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-bash"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token plain">pages/  </span><span class="token comment"># 目录中的 js 文件将被解析生成页面</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- _app.js  </span><span class="token comment"># 全局布局、样式在这里设置</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- index.js  </span><span class="token comment"># 通过 http://yoursite/ 来访问</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain">posts/  </span><span class="token comment"># 文章目录，放 mdx 文件</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain">public/  </span><span class="token comment"># 放图片、图标等静态资源</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain">styles/  </span><span class="token comment"># 放 css 文件</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">next.config.js  </span><span class="token comment"># Next.js 的配置文件</span><span class="token plain"></span></span></div></pre></div>
<h3>第二步：写个布局</h3>
<p>我们可以利用<code>pages/_app.js</code>来给所有页面增加所有页面的全局配置，如页面头的信息，布局等。首先，在根目录下新建<code>components/</code>目录，把自定义的组件都丢进去方便管理。创建几个页面布局用的组件，像<code>NavBar</code>、<code>Footer</code>这些。然后创一个<code>Layout</code>组件，将这些用于布局的组件像上面一样都引进来。再利用 Next.js 自带的<code>Head</code>组件，添加页面标题，icon，各种 SEO 的标签等。代码如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>components/Layout.jsx</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Head</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;next/head&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">NavBar</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;./Navbar&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Footer</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;./Footer&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token constant">PAGE_TITLE</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;Kelvin&#x27;s Blog&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> </span><span class="token constant">PAGE_DESCRIPTION</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;Kelvin&#x27;s blog&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Layout</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> children </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain">      </span><span class="token comment">// 将被添加到所有页面头</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Head</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">13</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">meta name</span><span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span><span class="token plain"> content</span><span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">14</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">meta charSet</span><span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">15</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">meta name</span><span class="token operator">=</span><span class="token string">&quot;description&quot;</span><span class="token plain"> content</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">PAGE_DESCRIPTION</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">16</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">link rel</span><span class="token operator">=</span><span class="token string">&quot;icon&quot;</span><span class="token plain"> href</span><span class="token operator">=</span><span class="token string">&quot;/favicon.ico&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">17</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">title</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token constant">PAGE_TITLE</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">title</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">18</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Head</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">19</span><span class="token plain">      </span><span class="token comment">// 所有页面通用的布局</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">20</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token plain">div className</span><span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">21</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token maybe-class-name">NavBar</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">22</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">main className</span><span class="token operator">=</span><span class="token string">&quot;main&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">children</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">main</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">23</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Footer</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">24</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">25</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">26</span><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">27</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>将<code>Layout</code>组件引入到<code>pages/_app.js</code>中，像下面这样包住<code>&lt;Component /&gt;</code>，就可以实现全局的布局了。</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>pages/_app.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Layout</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;components/Layout&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&quot;styles/main.scss&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">MyApp</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> </span><span class="token parameter maybe-class-name">Component</span><span class="token parameter punctuation">,</span><span class="token parameter"> pageProps </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">      </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Component</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token plain">pageProps</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Layout</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token maybe-class-name">MyApp</span><span class="token punctuation">;</span><span class="token plain"></span></span></div></pre></div>
<h3>第三步：写个首页</h3>
<p><img src="/images/how-to-build-a-static-blog-with-nextjs-and-mdx-i/home.png" alt="Blog 首页"/></p>
<p>写完基本的布局，是时候来写首页了。Blog 的首页比较简单，就是一个文章的列表，包括文章的标题、发表日期、简介等。这些数据，会在 Next.js 打包时，传给首页组件。</p>
<p>Next.js 支持 SSG 和 SSR 的方式去生成页面，我们是纯静态页面，不考虑 SSR。在 SSG 的过程中，Next.js 提供了<code>getStaticProps()</code>钩子，可以在生成页面的时候去做一些额外的处理，比如从数据库中获取数据，压缩图片等。这些处理过的数据，可以通过<code>getStaticProps()</code>返回的对象（<code>props</code>）传递给页面组件。</p>
<p>假设我们有一个获取文章数据的<code>getAllPosts()</code>函数。我们可以在<code>pages/index.js</code>中导出一个异步函数<code>getStaticProps</code>，在这个函数中调用<code>getAllPosts</code>，将获取到的文章数据<code>postsData</code>包裹在一个对象中返回出来（作为<code>props</code>属性的值）。Next.js 就会在 SSG 的过程中，以<code>props</code>的形式将这个返回值传递给<code>Home</code>组件。</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>pages/index.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain">  </span><span class="token comment">// 获取文章数据</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain"></span><span class="token comment">// 在打包时调用，返回 props 给 Home 组件生成首页</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> postsData </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">    </span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain">      postsData</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">13</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">14</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">15</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Home</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> postsData </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">16</span><span class="token plain">  </span><span class="token comment">// 首页</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">17</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>那么问题来了，这个<code>getAllPosts()</code>函数，该怎么弄呢？前面讲过，最终我们是要用 MDX 文件来写文章，放在<code>posts/</code>这个目录下，如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-bash"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token plain">posts/</span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- first-post.mdx   </span><span class="token comment"># =&gt; http://localhost:3000/post/first-post</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token operator">|</span><span class="token plain">--- second-post.mdx  </span><span class="token comment"># =&gt; http://localhost:3000/post/second-post</span><span class="token plain"></span></span></div></pre></div>
<p>那么有没有可能，在这些文件中记录标题、发表日期、简介、分类等信息，然后遍历这个目录下的所有文件，取出这些数据呢？有，我们需要用到 <strong>frontmatter</strong>！</p>
<p>Frontmatter 是 markdown 的插件，通过在 MD 文件头插入键值对的方式，存储有关文件的元数据。我们可以通过 frontmatter 来存储标题、发表日期、简介这些信息，格式如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-md"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token front-matter-block punctuation">---</span><span class="token front-matter-block"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">title</span><span class="token front-matter-block front-matter yaml language-yaml punctuation">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string">&quot;使用 Next.js 与 MDX 搭建一个静态博客&quot;</span><span class="token front-matter-block front-matter yaml language-yaml"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">date</span><span class="token front-matter-block front-matter yaml language-yaml punctuation">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string">&quot;OCT 22, 2021&quot;</span><span class="token front-matter-block front-matter yaml language-yaml"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">desc</span><span class="token front-matter-block front-matter yaml language-yaml punctuation">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string">&quot;花了几天时间，重新搭了一个 blog。&quot;</span><span class="token front-matter-block front-matter yaml language-yaml"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule">type</span><span class="token front-matter-block front-matter yaml language-yaml punctuation">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string">&quot;horse-sense&quot;</span><span class="token front-matter-block"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token front-matter-block"></span><span class="token front-matter-block punctuation">---</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">文章正文部分</span></span></div></pre></div>
<p>使用 <a href="https://github.com/jonschlinkert/gray-matter">gray-matter</a> 这个包，可以将这些元数据提取出来，具体方法为，先安装依赖包：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>code</div><pre class="prism-code language-bash"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token function">yarn</span><span class="token plain"> </span><span class="token function">add</span><span class="token plain"> gray-matter -D</span></span></div></pre></div>
<p>在根目录新建<code>lib/posts.js</code>文件，实现<code>getAllPosts()</code>函数。大致过程为：</p>
<ol>
<li>先遍历<code>posts/</code>目录，拿到所有文件名，并过滤掉只要 MDX 文件</li>
<li>读取每个文件，通过<code>gray-matter</code>处理</li>
<li>将提取到的数据与文件名（id）组合</li>
<li>按发表日期排序后返回</li>
</ol>
<p>具体代码如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>lib/posts.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">path</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;path&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports">matter</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;gray-matter&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> postsDirectory </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token plain">process</span><span class="token punctuation">.</span><span class="token method function property-access">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;posts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain"></span><span class="token comment">// 获取 /posts 目录下的文件名，过滤只要 MDX 文件</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> fileNames </span><span class="token operator">=</span><span class="token plain"> fs</span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">readdirSync</span><span class="token punctuation">(</span><span class="token plain">postsDirectory</span><span class="token punctuation">)</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> fileName</span><span class="token punctuation">.</span><span class="token method function property-access">match</span><span class="token punctuation">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.mdx$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> postsData </span><span class="token operator">=</span><span class="token plain"> fileNames</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">13</span><span class="token plain">    </span><span class="token comment">// 去除后缀名，剩下的文件名为 id</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">14</span><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> id </span><span class="token operator">=</span><span class="token plain"> fileName</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.mdx$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">15</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">16</span><span class="token plain">    </span><span class="token comment">// MDX 文件路径</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">17</span><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> filePath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token plain">postsDirectory</span><span class="token punctuation">,</span><span class="token plain"> fileName</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">18</span><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> fileContent </span><span class="token operator">=</span><span class="token plain"> fs</span><span class="token punctuation">.</span><span class="token method function property-access">readFileSync</span><span class="token punctuation">(</span><span class="token plain">filePath</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">19</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">20</span><span class="token plain">    </span><span class="token comment">// 读取 MDX 文件头数据</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">21</span><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">matter</span><span class="token punctuation">(</span><span class="token plain">fileContent</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">22</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">23</span><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">24</span><span class="token plain">      id</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">25</span><span class="token plain">      </span><span class="token spread operator">...</span><span class="token plain">data</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">26</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">27</span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">28</span><span class="token plain">  </span><span class="token comment">// 返回指定类型，且按时间排序的结果</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">29</span><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">type</span><span class="token punctuation">)</span><span class="token plain"> postsData </span><span class="token operator">=</span><span class="token plain"> postsData</span><span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> post</span><span class="token punctuation">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> type</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">30</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">31</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> postsData</span><span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> </span><span class="token parameter literal-property property">date</span><span class="token parameter operator">:</span><span class="token parameter"> a </span><span class="token parameter punctuation">}</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> </span><span class="token parameter literal-property property">date</span><span class="token parameter operator">:</span><span class="token parameter"> b </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">32</span><span class="token plain">    a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token plain">a</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">33</span><span class="token plain">    b </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token plain">b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">34</span><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">a </span><span class="token operator">&lt;</span><span class="token plain"> b</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">35</span><span class="token plain">      </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">36</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">a </span><span class="token operator">&gt;</span><span class="token plain"> b</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">37</span><span class="token plain">      </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">38</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">39</span><span class="token plain">      </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">40</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">41</span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">42</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>这里<code>getAllPosts(type)</code>方法还引入了一个<code>type</code>参数，方便获取特定分类的文章数据。</p>
<p>然后在<code>components/</code>目录中新建一个<code>PostList</code>组件，方便在别的页面中复用。组件用到了 Next.js 自带的<code>Link</code>组件，用法可以看<a href="https://nextjs.org/docs/api-reference/next/link">官方文档</a>，代码如下：</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>components/PostList.jsx</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Link</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;next/link&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain"></span><span class="token comment">// postData 包含了所有文章的 id、标题、发表日期、简介</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">PostList</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> postsData </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token plain">ul className</span><span class="token operator">=</span><span class="token string">&quot;main-posts-list&quot;</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain">postsData</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> id</span><span class="token parameter punctuation">,</span><span class="token parameter"> title</span><span class="token parameter punctuation">,</span><span class="token parameter"> date</span><span class="token parameter punctuation">,</span><span class="token parameter"> desc </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token plain">li key</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">id</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">          </span><span class="token operator">&lt;</span><span class="token plain">article</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain">            </span><span class="token operator">&lt;</span><span class="token plain">div className</span><span class="token operator">=</span><span class="token string">&quot;posts-list-date&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">date</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">div</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain">            </span><span class="token operator">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> href</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">/post/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain">              </span><span class="token operator">&lt;</span><span class="token plain">a</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">13</span><span class="token plain">                </span><span class="token operator">&lt;</span><span class="token plain">h1</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">title</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">h1</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">14</span><span class="token plain">              </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">a</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">15</span><span class="token plain">            </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Link</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">16</span><span class="token plain">            </span><span class="token operator">&lt;</span><span class="token plain">p</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token plain">desc</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">p</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">17</span><span class="token plain">          </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">article</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">18</span><span class="token plain">        </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">li</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">19</span><span class="token plain">      </span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">20</span><span class="token plain">    </span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">ul</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">21</span><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">22</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>最后在<code>pages/index.js</code>文件中调用<code>getAllPosts</code>并传给<code>PostList</code>。注意，最后<code>return</code>出来的数据，一定要包在<code>props{}</code>对象中。如此这番折腾之后，我们的首页终于完成了！</p>
<div class="my-8 rounded-2xl overflow-hidden bg-[#282c34]"><div class="relative px-4 py-2 text-sm font-bold text-white text-center"><ul class="absolute inset-y-0 left-0 flex items-center gap-2 px-4 m-0 list-none"><li class="code-block-button bg-[#fc605d]"></li><li class="code-block-button bg-[#fcbb40]"></li><li class="code-block-button bg-[#33c648]"></li></ul>pages/index.js</div><pre class="prism-code language-js"><div class="inline-block min-w-full"><span class="token-line"><span class="code-block-line-number">1</span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">PostList</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;components/PostList&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">2</span><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> getAllPosts </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&quot;lib/posts&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">3</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">4</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">5</span><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> postsData </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">6</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">7</span><span class="token plain">    </span><span class="token literal-property property">props</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">8</span><span class="token plain">      postsData</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">9</span><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">10</span><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">11</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">12</span><span class="token plain">
</span></span><span class="token-line"><span class="code-block-line-number">13</span><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Home</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> postsData </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">14</span><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token maybe-class-name">PostList</span><span class="token plain"> postsData</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token plain">postsData</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></span><span class="token-line"><span class="code-block-line-number">15</span><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></span></div></pre></div>
<p>鉴于篇幅有点过长，关于文章页面的生成，代码高亮的配置等，放在<a href="/post/how-to-build-a-static-blog-with-nextjs-and-mdx-ii">第二篇文章</a>里介绍。</p></div></article></main></main><footer class="h-20 flex items-center justify-center text-sm text-neutral-400"><div>Build with ♥ @GZ</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"meta":{"title":"使用 Next.js 与 MDX 搭建一个静态博客（一）","date":"OCT 22, 2021","desc":"花了几天时间，重新搭了一个 blog。考虑到之前一直在写 Vue，这次想换 React 练练手，调研了一堆轮子后，花了九牛二虎之力才最终定下来，用 Next.js 和 MDX 来搭。过程中遇到了无数个坑，总结得到了这篇文章。","type":"horse-sense"},"code":"var Component=(()=\u003e{var p=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(t,e)=\u003e()=\u003e(e||t((e={exports:{}}).exports,e),e.exports),j=(t,e)=\u003e{for(var o in e)r(t,o,{get:e[o],enumerable:!0})},i=(t,e,o,c)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!u.call(t,s)\u0026\u0026s!==o\u0026\u0026r(t,s,{get:()=\u003ee[s],enumerable:!(c=h(e,s))||c.enumerable});return t};var x=(t,e,o)=\u003e(o=t!=null?p(g(t)):{},i(e||!t||!t.__esModule?r(o,\"default\",{value:t,enumerable:!0}):o,t)),b=t=\u003ei(r({},\"__esModule\",{value:!0}),t);var l=f((A,a)=\u003e{a.exports=_jsx_runtime});var P={};j(P,{default:()=\u003eD,frontmatter:()=\u003ey});var n=x(l()),y={title:\"\\u4F7F\\u7528 Next.js \\u4E0E MDX \\u642D\\u5EFA\\u4E00\\u4E2A\\u9759\\u6001\\u535A\\u5BA2\\uFF08\\u4E00\\uFF09\",date:\"OCT 22, 2021\",desc:\"\\u82B1\\u4E86\\u51E0\\u5929\\u65F6\\u95F4\\uFF0C\\u91CD\\u65B0\\u642D\\u4E86\\u4E00\\u4E2A blog\\u3002\\u8003\\u8651\\u5230\\u4E4B\\u524D\\u4E00\\u76F4\\u5728\\u5199 Vue\\uFF0C\\u8FD9\\u6B21\\u60F3\\u6362 React \\u7EC3\\u7EC3\\u624B\\uFF0C\\u8C03\\u7814\\u4E86\\u4E00\\u5806\\u8F6E\\u5B50\\u540E\\uFF0C\\u82B1\\u4E86\\u4E5D\\u725B\\u4E8C\\u864E\\u4E4B\\u529B\\u624D\\u6700\\u7EC8\\u5B9A\\u4E0B\\u6765\\uFF0C\\u7528 Next.js \\u548C MDX \\u6765\\u642D\\u3002\\u8FC7\\u7A0B\\u4E2D\\u9047\\u5230\\u4E86\\u65E0\\u6570\\u4E2A\\u5751\\uFF0C\\u603B\\u7ED3\\u5F97\\u5230\\u4E86\\u8FD9\\u7BC7\\u6587\\u7AE0\\u3002\",type:\"horse-sense\"};function d(t){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",h2:\"h2\",a:\"a\",ul:\"ul\",li:\"li\",code:\"code\",h3:\"h3\",pre:\"pre\",img:\"img\",strong:\"strong\",ol:\"ol\"},t.components),{TicTacToe:o}=e;return o||w(\"TicTacToe\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:['\"In some ways, programming is like painting. You start with a blank canvas and certain basic raw materials. You use a combination of science, art, and craft to determine what to do with them.\"',(0,n.jsx)(\"br\",{}),(0,n.jsx)(\"br\",{}),\"-- Andrew Hunt\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"Why?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u82B1\\u4E86\\u51E0\\u5929\\u65F6\\u95F4\\uFF0C\\u91CD\\u65B0\\u642D\\u4E86\\u4E00\\u4E2A blog\\u3002\\u8003\\u8651\\u5230\\u4E4B\\u524D\\u4E00\\u76F4\\u5728\\u5199 Vue\\uFF0C\\u8FD9\\u6B21\\u60F3\\u6362 React \\u7EC3\\u7EC3\\u624B\\uFF0C\\u8C03\\u7814\\u4E86\\u4E00\\u5806\\u8F6E\\u5B50\\u540E\\uFF0C\\u82B1\\u4E86\\u4E5D\\u725B\\u4E8C\\u864E\\u4E4B\\u529B\\u624D\\u6700\\u7EC8\\u5B9A\\u4E0B\\u6765\\uFF0C\\u7528 \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/\",children:\"Next.js\"}),\" \\u548C \",(0,n.jsx)(e.a,{href:\"https://mdxjs.com/\",children:\"MDX\"}),\" \\u6765\\u642D\\u3002\\u8FC7\\u7A0B\\u4E2D\\u9047\\u5230\\u4E86\\u65E0\\u6570\\u4E2A\\u5751\\uFF0C\\u603B\\u7ED3\\u5F97\\u5230\\u4E86\\u8FD9\\u7BC7\\u6587\\u7AE0\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E4B\\u6240\\u4EE5\\u9009\\u62E9 Next.js \\u52A0 MDX\\uFF0C\\u4E3B\\u8981\\u662F\\u8003\\u8651\\u4EE5\\u4E0B\\u51E0\\u4E2A\\u9700\\u6C42\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u57FA\\u4E8E React\\uFF0C\\u65B9\\u4FBF\\u7EC3\\u624B\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u57FA\\u4E8E Markdown\\uFF0C\\u4E0D\\u7528\\u89E3\\u91CA\\u4E86\\u5427\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u9875\\u9762\\u3001\\u4E3B\\u9898\\u80FD\\u968F\\u4FBF\\u6539\\uFF0C\\u6700\\u597D\\u80FD\\u4ECE\\u96F6\\u5F00\\u59CB\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6700\\u7EC8\\u6253\\u5305\\u6210\\u9759\\u6001\\u9875\\u9762\\uFF0C\\u65B9\\u4FBF\\u76F4\\u63A5\\u4E22\\u5230 Github Pages \\u4E0A\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6709\\u811A\\u624B\\u67B6\\uFF0C\\u9879\\u76EE\\u914D\\u7F6E\\u7B80\\u5355\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E0A\\u8FF0\\u51E0\\u4E2A\\u9700\\u6C42\\uFF0CNext.js \\u90FD\\u80FD\\u5B8C\\u7F8E\\u6EE1\\u8DB3\\uFF0C\\u6574\\u4E2A\\u5F00\\u53D1\\u4F53\\u9A8C\\u4E5F\\u662F\\u76F8\\u5F53\\u4F18\\u79C0\\uFF0C\\u8DDF\\u7740\\u6587\\u6863\\u8D70\\u4E00\\u904D\\u57FA\\u672C\\u5C31\\u80FD\\u642D\\u51FA\\u6765\\u3002\\u5269\\u4E0B\\u7684\\u5C31\\u662F\\u627E\\u5404\\u79CD\\u4F18\\u5316\\u7684\\u63D2\\u4EF6\\uFF0C\\u4EE5\\u53CA\\u65E0\\u4F11\\u6B62\\u5730\\u4FEE\\u6539\\u9875\\u9762\\u6837\\u5F0F\\u3002\"}),`\n`,(0,n.jsx)(o,{}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9879\\u76EE\\u6700\\u5F00\\u59CB\\u642D\\u5EFA\\u7684\\u65F6\\u5019\\uFF0C\\u672C\\u6765\\u6253\\u7B97\\u4E3B\\u8981\\u5199\\u5199\\u6587\\u7AE0\\uFF0C\\u6240\\u4EE5\\u7528\\u7684\\u662F\\u7EAF MD \\u6765\\u5199\\u3002\\u540E\\u6765\\u53D1\\u73B0\\u4E86\",(0,n.jsx)(e.a,{href:\"https://www.joshwcomeau.com/\",children:\"\\u8FD9\\u4E2A\\u7F51\\u7AD9\"}),\"\\uFF0C\\u91CC\\u5934\\u7684\",(0,n.jsx)(e.a,{href:\"https://www.joshwcomeau.com/blog/how-i-built-my-blog/\",children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\"}),\"\\u6709\\u4ECB\\u7ECD\\u4F5C\\u8005\\u662F\\u600E\\u6837\\u642D\\u5EFA\\u4ED6\\u7684 blog \\u7684\\uFF0C\\u7528\\u5230\\u7684\\u662F MDX\\u3002\\u5176\\u5B9E MDX \\u5C31\\u662F\\u80FD\\u5728 MD \\u6587\\u4EF6\\u91CC\\u63D2\\u5165 React \\u7684\\u7EC4\\u4EF6\\uFF0C\\u662F MD \\u7684\\u62D3\\u5C55\\u3002\\u5F53\\u65F6\\u6211\\u60F3\\uFF0C\\u5982\\u679C\\u5728\\u6587\\u7AE0\\u91CC\\u52A0\\u4E00\\u4E9B\\u81EA\\u5B9A\\u4E49\\u7684\\u7EC4\\u4EF6\\uFF0C\\u7528\\u6765\\u505A\\u6F14\\u793A\\uFF0C\\u6548\\u679C\\u5E94\\u8BE5\\u633A\\u597D\\u7684\\uFF0C\\u5C31\\u50CF\\u4E0A\\u9762\\u7684\",(0,n.jsx)(e.code,{children:\"TicTacToe\"}),\"\\u7EC4\\u4EF6\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next.js \\u96C6\\u6210 MDX \\u6709\\u76F8\\u5F53\\u591A\\u65B9\\u6848\\uFF0C\\u5E76\\u4E14\\u6BCF\\u4E2A\\u90FD\\u6709\\u5751\\u3002\",(0,n.jsx)(e.a,{href:\"https://dev.to/tylerlwsmith/quick-comparison-of-mdx-integration-strategies-with-next-js-1kcm\",children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\"}),\"\\u6709\\u7B80\\u5355\\u7684\\u5BF9\\u6BD4\\uFF0C\\u611F\\u5174\\u8DA3\\u7684\\u53EF\\u4EE5\\u4E86\\u89E3\\u4E00\\u4E0B\\u3002\\u4E00\\u5F00\\u59CB\\u6211\\u5C1D\\u8BD5\\u7528\",(0,n.jsx)(e.code,{children:\"mdx-bundler\"}),\"\\u6765\\u89E3\\u91CA MDX \\u6587\\u4EF6\\uFF0C\\u7B2C\\u4E00\\u7248\\u51FA\\u6765\\u7684\\u6548\\u679C\\u8FD8\\u884C\\uFF0C\\u53EA\\u662F\\u5361\\u5728\\u4E86\\u751F\\u6210\\u76EE\\u5F55\\u4E0A\\u3002\\u540E\\u9762\\u53D1\\u73B0 \",(0,n.jsx)(e.a,{href:\"https://beta.reactjs.org/\",children:\"React \\u7684\\u6587\\u6863\"}),\"\\u5C45\\u7136\\u66F4\\u65B0\\u4E86\\uFF0C\\u540C\\u6837\\u662F\\u57FA\\u4E8E Next.js \\u548C MDX\\u3002\\u4E8E\\u662F\\u6211\\u8D76\\u7D27 clone \\u4E0B\\u6765\\uFF0C\\u53D1\\u73B0\\u4ED6\\u4EEC\\u7528\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"@mdx-js/loader\"}),\"\\u3002\\u6298\\u817E\\u4E86\\u4E00\\u756A\\u4E4B\\u540E\\uFF0C\\u6211\\u6700\\u7EC8\\u8FD8\\u662F\\u6362\\u56DE\\u4E86\",(0,n.jsx)(e.code,{children:\"mdx-bundler\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"How?\"}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u7B2C\\u4E00\\u6B65\\uFF1A\\u5148\\u8DD1\\u8D77\\u6765\\u518D\\u8BF4\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5176\\u5B9E Next.js \\u5B98\\u65B9\\u6709\\u4E00\\u4E2A\\u6BD4\\u8F83\\u5B8C\\u6574\\u7684\",(0,n.jsx)(e.a,{href:\"https://nextjs.org/learn/basics/create-nextjs-app\",children:\"\\u65B0\\u624B\\u6559\\u7A0B\"}),\"\\uFF0C\\u8DDF\\u7740\\u5B83\\u8D70\\u5B8C\\uFF0C\\u5C31\\u53EF\\u4EE5\\u628A\\u4E00\\u4E2A\\u57FA\\u4E8E markdown \\u7684 blog \\u8DD1\\u8D77\\u6765\\u3002\\u6216\\u8005\\u901A\\u8FC7\",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\",children:\"\\u8FD9\\u4E2A\\u6A21\\u677F\"}),\"\\u4E5F\\u53EF\\u4EE5\\u8FBE\\u5230\\u540C\\u6837\\u7684\\u6548\\u679C\\u3002\\u7136\\u800C\\uFF0C\\u4F5C\\u4E3A\\u7EC3\\u624B\\u9879\\u76EE\\uFF0C\\u5F53\\u7136\\u5F97\\u4ECE\\u96F6\\u5F00\\u59CB\\uFF0C\\u91CD\\u65B0\\u9020\\u4E2A\\u8F6E\\u5B50\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5148\\u901A\\u8FC7\\u4E0B\\u9762\\u7684\\u547D\\u4EE4\\uFF0C\\u5F97\\u5230\\u4E00\\u4E2A\\u201C\\u7EAF\\u51C0\\u7248\\u201D\\u7684 next app\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`yarn create next-app my-blog\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FDB\\u5165\\u9879\\u76EE\\u6839\\u76EE\\u5F55\\u5E76\\u8FD0\\u884C\",(0,n.jsx)(e.code,{children:\"yarn dev\"}),\"\\u540E\\u8BBF\\u95EE\",(0,n.jsx)(e.code,{children:\"http://localhost:3000\"}),\"\\uFF0C\\u5982\\u679C\\u80FD\\u770B\\u5230\\u4E0B\\u9762\\u7684\\u9875\\u9762\\uFF0C\\u5C31\\u8BC1\\u660E\\u9879\\u76EE\\u5DF2\\u7ECF\\u987A\\u5229\\u8DD1\\u8D77\\u6765\\u4E86\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/images/how-to-build-a-static-blog-with-nextjs-and-mdx-i/welcome-screen.png\",alt:\"\\u811A\\u624B\\u67B6\\u9996\\u9875\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6B64\\u65F6\\u9879\\u76EE\\u7684\\u76EE\\u5F55\\u7ED3\\u6784\\u662F\\u8FD9\\u6837\\u7684\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`pages/  # \\u76EE\\u5F55\\u4E2D\\u7684 js \\u6587\\u4EF6\\u5C06\\u88AB\\u89E3\\u6790\\u751F\\u6210\\u9875\\u9762\n|--- _app.js  # \\u5168\\u5C40\\u5E03\\u5C40\\u3001\\u6837\\u5F0F\\u5728\\u8FD9\\u91CC\\u8BBE\\u7F6E\n|--- index.js  # \\u901A\\u8FC7 http://yoursite/ \\u6765\\u8BBF\\u95EE\n|--- api/  # API \\u8DEF\\u7531\\uFF0C\\u53EF\\u4EE5\\u7528\\u6765\\u5B9E\\u73B0 severless \\u51FD\\u6570\n     |--- hello.js  # \\u901A\\u8FC7 http://yoursite/api/hello \\u6765\\u8BBF\\u95EE\\uFF0C\\u7528\\u4E0D\\u5230\\uFF0C\\u53EF\\u5FFD\\u7565\npublic/  # \\u653E\\u56FE\\u7247\\u3001\\u56FE\\u6807\\u7B49\\u9759\\u6001\\u8D44\\u6E90\nstyles/  # \\u653E css \\u6587\\u4EF6\nnext.config.js  # Next.js \\u7684\\u914D\\u7F6E\\u6587\\u4EF6\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E0A\\u9762\\u770B\\u5230\\u7684\\u9996\\u9875\\uFF0C\\u5176\\u5B9E\\u5C31\\u662F\",(0,n.jsx)(e.code,{children:\"pages/index.js\"}),\"\\u91CC\\u7684\\u4E1C\\u897F\\u3002Next.js \\u5F00\\u7BB1\\u5373\\u652F\\u6301\\u9875\\u9762\\u8DEF\\u7531\\uFF0C\\u4E0D\\u9700\\u8981\\u7E41\\u7410\\u5730\\u914D\\u7F6E React Router\\uFF0C\\u4EC5\\u9700\\u8981\\u5728\",(0,n.jsx)(e.code,{children:\"pages/\"}),\"\\u76EE\\u5F55\\u4E0B\\u65B0\\u589E\\u4E00\\u4E2A\\u6587\\u4EF6\\uFF0C\\u6BD4\\u5982\",(0,n.jsx)(e.code,{children:\"pages/about.js\"}),\"\\uFF0C\\u5E76\\u5728\\u91CC\\u9762\\u5BFC\\u51FA\\u4E00\\u4E2A\\u7EC4\\u4EF6\\uFF0C\\u5982\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=pages/about.js\",children:`export default function About() {\n  return \u003ch1\u003eHello World!\u003c/h1\u003e;\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u5C31\\u53EF\\u4EE5\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"http://localhost:3000/about\"}),\"\\u6765\\u8BBF\\u95EE\\u8FD9\\u4E2A\\u9875\\u9762\\u4E86\\uFF0C\\u7B80\\u5355\\u5230\\u4EE4\\u4EBA\\u53D1\\u6307\\uFF01\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6574\\u4E2A\",(0,n.jsx)(e.code,{children:\"pages/\"}),\"\\u76EE\\u5F55\\u5C31\\u76F8\\u5F53\\u4E8E\\u4E00\\u4E2A\\u8DEF\\u7531\\u8868\\uFF0C\\u5F53\\u9700\\u8981\\u589E\\u52A0\\u9875\\u9762\\u8DEF\\u7531\\u65F6\\uFF0C\\u5728\\u76F8\\u5E94\\u7684\\u76EE\\u5F55\\u4E0B\\u65B0\\u5EFA\\u6587\\u4EF6\\u5373\\u53EF\\u3002\\u6211\\u4EEC\\u7684\\u6587\\u7AE0\\u4EE5 MDX \\u6587\\u4EF6\\u7684\\u5F62\\u5F0F\\u653E\\u5728\",(0,n.jsx)(e.code,{children:\"posts/\"}),\"\\u76EE\\u5F55\\u4E2D\\u3002\\u901A\\u8FC7\\u201C\\u52A8\\u6001\\u201D\\u7684\\u65B9\\u5F0F\\u751F\\u6210\\uFF0C\\u9875\\u9762\\u7684\\u89E3\\u6790\\u903B\\u8F91\\u5199\\u5728\",(0,n.jsx)(e.code,{children:\"pages/post/[id].js\"}),\"\\u6587\\u4EF6\\u4E2D\\uFF0C\\u901A\\u8FC7\\u94FE\\u63A5\",(0,n.jsx)(e.code,{children:\"http://localhost:3000/post/:id\"}),\"\\u6765\\u8BBF\\u95EE\\u76F8\\u5E94\\u7684\\u6587\\u7AE0\\uFF0C\\u5177\\u4F53\\u914D\\u7F6E\\u540E\\u9762\\u4F1A\\u8BF4\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u6CE8\\u610F\\u7684\\u662F\\uFF0C\\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\uFF0CNext.js \\u53EA\\u4F1A\\u89E3\\u6790 JS \\u6587\\u4EF6\\uFF0C\\u9700\\u8981\\u5728\",(0,n.jsx)(e.code,{children:\"next.config.js\"}),\"\\u6587\\u4EF6\\u4E2D\\u4FEE\\u6539\\u914D\\u7F6E\\u6765\\u652F\\u6301\\u66F4\\u591A\\u6587\\u4EF6\\u7C7B\\u578B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=next.config.js\",children:`module.exports = {\n  pageExtensions: [\"js\", \"jsx\", \"md\", \"mdx\"],\n};\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9664\\u6B64\\u4E4B\\u5916\\uFF0C\\u5E76\\u4E0D\\u662F\\u6240\\u6709\\u5728\",(0,n.jsx)(e.code,{children:\"pages/\"}),\"\\u76EE\\u5F55\\u4E0B\\u7684\\u6587\\u4EF6\\u90FD\\u4F1A\\u88AB\\u89E3\\u6790\\u751F\\u6210\\u9875\\u9762\\uFF0C\\u4F8B\\u5916\\u7684\\u6709\",(0,n.jsx)(e.code,{children:\"api/\"}),\"\\u76EE\\u5F55\\u53CA\",(0,n.jsx)(e.code,{children:\"_app.js\"}),\"\\u3002\\u5176\\u4E2D\",(0,n.jsx)(e.code,{children:\"api/\"}),\"\\u76EE\\u5F55\\u4E3B\\u8981\\u7528\\u4E8E severless \\u51FD\\u6570\\uFF0C\\u6682\\u65F6\\u7528\\u4E0D\\u4E0A\\uFF0C\\u53EF\\u4EE5\\u6574\\u4E2A\\u5220\\u6389\\u5B8C\\u5168\\u5FFD\\u7565\\u3002\\u800C\",(0,n.jsx)(e.code,{children:\"pages/_app.js\"}),\"\\u8FD9\\u4E2A\\u6587\\u4EF6\\uFF0C\\u53EF\\u4EE5\\u7528\\u6765\\u8FDB\\u884C\\u4E00\\u4E9B\\u5168\\u5C40\\u7684\\u914D\\u7F6E\\u3002\\u9ED8\\u8BA4\\u751F\\u6210\\u7684\",(0,n.jsx)(e.code,{children:\"pages/_app.js\"}),\"\\u6587\\u4EF6\\u5185\\u5BB9\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=pages/_app.js\",children:`function MyApp({ Component, pageProps }) {\n  return \u003cComponent {...pageProps} /\u003e;\n}\n\nexport default MyApp;\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7C7B\\u6BD4 React Router\\uFF0C\",(0,n.jsx)(e.code,{children:\"MyApp\"}),\"\\u76F8\\u5F53\\u4E8E\\u90A3\\u4E2A\\u88AB\",(0,n.jsx)(e.code,{children:\"BrowserRouter\"}),\"\\u5305\\u88F9\\u7684\\u201C\\u5168\\u5C40\\u201D\\u7EC4\\u4EF6\\u3002\\u4F20\\u7ED9\\u5B83\\u7684\",(0,n.jsx)(e.code,{children:\"Component\"}),\"\\u7EC4\\u4EF6\\uFF0C\\u5219\\u5BF9\\u5E94\\u4E86\",(0,n.jsx)(e.code,{children:\"pages/\"}),\"\\u76EE\\u5F55\\u4E0B\\u6BCF\\u4E00\\u4E2A\\u5C06\\u8981\\u88AB\\u89E3\\u6790\\u7684\\u6587\\u4EF6\\u4E2D\\u9ED8\\u8BA4\\u5BFC\\u51FA\\u7684\\u7EC4\\u4EF6\\uFF0C\\u76F8\\u5F53\\u4E8E\\u6BCF\\u4E2A\",(0,n.jsx)(e.code,{children:\"Route\"}),\"\\u3002\\u5982\\u89E3\\u6790\",(0,n.jsx)(e.code,{children:\"pages/about.js\"}),\"\\u8FD9\\u4E2A\\u6587\\u4EF6\\u65F6\\uFF0C\",(0,n.jsx)(e.code,{children:\"Component = Aboubt\"}),\"\\uFF0C\",(0,n.jsx)(e.code,{children:\"/about\"}),\"\\u8FD9\\u4E2A\\u8DEF\\u7531\\u5C31\\u6307\\u5411\\u4E86\",(0,n.jsx)(e.code,{children:\"About\"}),\"\\u7EC4\\u4EF6\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6B64\\u65F6\\uFF0C\\u9879\\u76EE\\u7684\\u76EE\\u5F55\\u7ED3\\u6784\\u8C03\\u6574\\u4E3A\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`pages/  # \\u76EE\\u5F55\\u4E2D\\u7684 js \\u6587\\u4EF6\\u5C06\\u88AB\\u89E3\\u6790\\u751F\\u6210\\u9875\\u9762\n|--- _app.js  # \\u5168\\u5C40\\u5E03\\u5C40\\u3001\\u6837\\u5F0F\\u5728\\u8FD9\\u91CC\\u8BBE\\u7F6E\n|--- index.js  # \\u901A\\u8FC7 http://yoursite/ \\u6765\\u8BBF\\u95EE\nposts/  # \\u6587\\u7AE0\\u76EE\\u5F55\\uFF0C\\u653E mdx \\u6587\\u4EF6\npublic/  # \\u653E\\u56FE\\u7247\\u3001\\u56FE\\u6807\\u7B49\\u9759\\u6001\\u8D44\\u6E90\nstyles/  # \\u653E css \\u6587\\u4EF6\nnext.config.js  # Next.js \\u7684\\u914D\\u7F6E\\u6587\\u4EF6\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u7B2C\\u4E8C\\u6B65\\uFF1A\\u5199\\u4E2A\\u5E03\\u5C40\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u53EF\\u4EE5\\u5229\\u7528\",(0,n.jsx)(e.code,{children:\"pages/_app.js\"}),\"\\u6765\\u7ED9\\u6240\\u6709\\u9875\\u9762\\u589E\\u52A0\\u6240\\u6709\\u9875\\u9762\\u7684\\u5168\\u5C40\\u914D\\u7F6E\\uFF0C\\u5982\\u9875\\u9762\\u5934\\u7684\\u4FE1\\u606F\\uFF0C\\u5E03\\u5C40\\u7B49\\u3002\\u9996\\u5148\\uFF0C\\u5728\\u6839\\u76EE\\u5F55\\u4E0B\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"components/\"}),\"\\u76EE\\u5F55\\uFF0C\\u628A\\u81EA\\u5B9A\\u4E49\\u7684\\u7EC4\\u4EF6\\u90FD\\u4E22\\u8FDB\\u53BB\\u65B9\\u4FBF\\u7BA1\\u7406\\u3002\\u521B\\u5EFA\\u51E0\\u4E2A\\u9875\\u9762\\u5E03\\u5C40\\u7528\\u7684\\u7EC4\\u4EF6\\uFF0C\\u50CF\",(0,n.jsx)(e.code,{children:\"NavBar\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"Footer\"}),\"\\u8FD9\\u4E9B\\u3002\\u7136\\u540E\\u521B\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"Layout\"}),\"\\u7EC4\\u4EF6\\uFF0C\\u5C06\\u8FD9\\u4E9B\\u7528\\u4E8E\\u5E03\\u5C40\\u7684\\u7EC4\\u4EF6\\u50CF\\u4E0A\\u9762\\u4E00\\u6837\\u90FD\\u5F15\\u8FDB\\u6765\\u3002\\u518D\\u5229\\u7528 Next.js \\u81EA\\u5E26\\u7684\",(0,n.jsx)(e.code,{children:\"Head\"}),\"\\u7EC4\\u4EF6\\uFF0C\\u6DFB\\u52A0\\u9875\\u9762\\u6807\\u9898\\uFF0Cicon\\uFF0C\\u5404\\u79CD SEO \\u7684\\u6807\\u7B7E\\u7B49\\u3002\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=components/Layout.jsx\",children:`import Head from \"next/head\";\nimport NavBar from \"./Navbar\";\nimport Footer from \"./Footer\";\n\nconst PAGE_TITLE = \"Kelvin's Blog\";\nconst PAGE_DESCRIPTION = \"Kelvin's blog\";\n\nexport default function Layout({ children }) {\n  return (\n    \u003c\u003e\n      // \\u5C06\\u88AB\\u6DFB\\u52A0\\u5230\\u6240\\u6709\\u9875\\u9762\\u5934\n      \u003cHead\u003e\n        \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /\u003e\n        \u003cmeta charSet=\"utf-8\" /\u003e\n        \u003cmeta name=\"description\" content={PAGE_DESCRIPTION} /\u003e\n        \u003clink rel=\"icon\" href=\"/favicon.ico\" /\u003e\n        \u003ctitle\u003e{PAGE_TITLE}\u003c/title\u003e\n      \u003c/Head\u003e\n      // \\u6240\\u6709\\u9875\\u9762\\u901A\\u7528\\u7684\\u5E03\\u5C40\n      \u003cdiv className=\"container\"\u003e\n        \u003cNavBar /\u003e\n        \u003cmain className=\"main\"\u003e{children}\u003c/main\u003e\n        \u003cFooter /\u003e\n      \u003c/div\u003e\n    \u003c/\u003e\n  );\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5C06\",(0,n.jsx)(e.code,{children:\"Layout\"}),\"\\u7EC4\\u4EF6\\u5F15\\u5165\\u5230\",(0,n.jsx)(e.code,{children:\"pages/_app.js\"}),\"\\u4E2D\\uFF0C\\u50CF\\u4E0B\\u9762\\u8FD9\\u6837\\u5305\\u4F4F\",(0,n.jsx)(e.code,{children:\"\u003cComponent /\u003e\"}),\"\\uFF0C\\u5C31\\u53EF\\u4EE5\\u5B9E\\u73B0\\u5168\\u5C40\\u7684\\u5E03\\u5C40\\u4E86\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=pages/_app.js\",children:`import Layout from \"components/Layout\";\nimport \"styles/main.scss\";\n\nfunction MyApp({ Component, pageProps }) {\n  return (\n    \u003cLayout\u003e\n      \u003cComponent {...pageProps} /\u003e\n    \u003c/Layout\u003e\n  );\n}\n\nexport default MyApp;\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"\\u7B2C\\u4E09\\u6B65\\uFF1A\\u5199\\u4E2A\\u9996\\u9875\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/images/how-to-build-a-static-blog-with-nextjs-and-mdx-i/home.png\",alt:\"Blog \\u9996\\u9875\"})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5199\\u5B8C\\u57FA\\u672C\\u7684\\u5E03\\u5C40\\uFF0C\\u662F\\u65F6\\u5019\\u6765\\u5199\\u9996\\u9875\\u4E86\\u3002Blog \\u7684\\u9996\\u9875\\u6BD4\\u8F83\\u7B80\\u5355\\uFF0C\\u5C31\\u662F\\u4E00\\u4E2A\\u6587\\u7AE0\\u7684\\u5217\\u8868\\uFF0C\\u5305\\u62EC\\u6587\\u7AE0\\u7684\\u6807\\u9898\\u3001\\u53D1\\u8868\\u65E5\\u671F\\u3001\\u7B80\\u4ECB\\u7B49\\u3002\\u8FD9\\u4E9B\\u6570\\u636E\\uFF0C\\u4F1A\\u5728 Next.js \\u6253\\u5305\\u65F6\\uFF0C\\u4F20\\u7ED9\\u9996\\u9875\\u7EC4\\u4EF6\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next.js \\u652F\\u6301 SSG \\u548C SSR \\u7684\\u65B9\\u5F0F\\u53BB\\u751F\\u6210\\u9875\\u9762\\uFF0C\\u6211\\u4EEC\\u662F\\u7EAF\\u9759\\u6001\\u9875\\u9762\\uFF0C\\u4E0D\\u8003\\u8651 SSR\\u3002\\u5728 SSG \\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0CNext.js \\u63D0\\u4F9B\\u4E86\",(0,n.jsx)(e.code,{children:\"getStaticProps()\"}),\"\\u94A9\\u5B50\\uFF0C\\u53EF\\u4EE5\\u5728\\u751F\\u6210\\u9875\\u9762\\u7684\\u65F6\\u5019\\u53BB\\u505A\\u4E00\\u4E9B\\u989D\\u5916\\u7684\\u5904\\u7406\\uFF0C\\u6BD4\\u5982\\u4ECE\\u6570\\u636E\\u5E93\\u4E2D\\u83B7\\u53D6\\u6570\\u636E\\uFF0C\\u538B\\u7F29\\u56FE\\u7247\\u7B49\\u3002\\u8FD9\\u4E9B\\u5904\\u7406\\u8FC7\\u7684\\u6570\\u636E\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"getStaticProps()\"}),\"\\u8FD4\\u56DE\\u7684\\u5BF9\\u8C61\\uFF08\",(0,n.jsx)(e.code,{children:\"props\"}),\"\\uFF09\\u4F20\\u9012\\u7ED9\\u9875\\u9762\\u7EC4\\u4EF6\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5047\\u8BBE\\u6211\\u4EEC\\u6709\\u4E00\\u4E2A\\u83B7\\u53D6\\u6587\\u7AE0\\u6570\\u636E\\u7684\",(0,n.jsx)(e.code,{children:\"getAllPosts()\"}),\"\\u51FD\\u6570\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\",(0,n.jsx)(e.code,{children:\"pages/index.js\"}),\"\\u4E2D\\u5BFC\\u51FA\\u4E00\\u4E2A\\u5F02\\u6B65\\u51FD\\u6570\",(0,n.jsx)(e.code,{children:\"getStaticProps\"}),\"\\uFF0C\\u5728\\u8FD9\\u4E2A\\u51FD\\u6570\\u4E2D\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"getAllPosts\"}),\"\\uFF0C\\u5C06\\u83B7\\u53D6\\u5230\\u7684\\u6587\\u7AE0\\u6570\\u636E\",(0,n.jsx)(e.code,{children:\"postsData\"}),\"\\u5305\\u88F9\\u5728\\u4E00\\u4E2A\\u5BF9\\u8C61\\u4E2D\\u8FD4\\u56DE\\u51FA\\u6765\\uFF08\\u4F5C\\u4E3A\",(0,n.jsx)(e.code,{children:\"props\"}),\"\\u5C5E\\u6027\\u7684\\u503C\\uFF09\\u3002Next.js \\u5C31\\u4F1A\\u5728 SSG \\u7684\\u8FC7\\u7A0B\\u4E2D\\uFF0C\\u4EE5\",(0,n.jsx)(e.code,{children:\"props\"}),\"\\u7684\\u5F62\\u5F0F\\u5C06\\u8FD9\\u4E2A\\u8FD4\\u56DE\\u503C\\u4F20\\u9012\\u7ED9\",(0,n.jsx)(e.code,{children:\"Home\"}),\"\\u7EC4\\u4EF6\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=pages/index.js\",children:`function getAllPosts() {\n  // \\u83B7\\u53D6\\u6587\\u7AE0\\u6570\\u636E\n}\n\n// \\u5728\\u6253\\u5305\\u65F6\\u8C03\\u7528\\uFF0C\\u8FD4\\u56DE props \\u7ED9 Home \\u7EC4\\u4EF6\\u751F\\u6210\\u9996\\u9875\nexport async function getStaticProps() {\n  const postsData = getAllPosts();\n  return {\n    props: {\n      postsData,\n    },\n  };\n}\n\nexport default function Home({ postsData }) {\n  // \\u9996\\u9875\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u90A3\\u4E48\\u95EE\\u9898\\u6765\\u4E86\\uFF0C\\u8FD9\\u4E2A\",(0,n.jsx)(e.code,{children:\"getAllPosts()\"}),\"\\u51FD\\u6570\\uFF0C\\u8BE5\\u600E\\u4E48\\u5F04\\u5462\\uFF1F\\u524D\\u9762\\u8BB2\\u8FC7\\uFF0C\\u6700\\u7EC8\\u6211\\u4EEC\\u662F\\u8981\\u7528 MDX \\u6587\\u4EF6\\u6765\\u5199\\u6587\\u7AE0\\uFF0C\\u653E\\u5728\",(0,n.jsx)(e.code,{children:\"posts/\"}),\"\\u8FD9\\u4E2A\\u76EE\\u5F55\\u4E0B\\uFF0C\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`posts/\n|--- first-post.mdx   # =\u003e http://localhost:3000/post/first-post\n|--- second-post.mdx  # =\u003e http://localhost:3000/post/second-post\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u90A3\\u4E48\\u6709\\u6CA1\\u6709\\u53EF\\u80FD\\uFF0C\\u5728\\u8FD9\\u4E9B\\u6587\\u4EF6\\u4E2D\\u8BB0\\u5F55\\u6807\\u9898\\u3001\\u53D1\\u8868\\u65E5\\u671F\\u3001\\u7B80\\u4ECB\\u3001\\u5206\\u7C7B\\u7B49\\u4FE1\\u606F\\uFF0C\\u7136\\u540E\\u904D\\u5386\\u8FD9\\u4E2A\\u76EE\\u5F55\\u4E0B\\u7684\\u6240\\u6709\\u6587\\u4EF6\\uFF0C\\u53D6\\u51FA\\u8FD9\\u4E9B\\u6570\\u636E\\u5462\\uFF1F\\u6709\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u7528\\u5230 \",(0,n.jsx)(e.strong,{children:\"frontmatter\"}),\"\\uFF01\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Frontmatter \\u662F markdown \\u7684\\u63D2\\u4EF6\\uFF0C\\u901A\\u8FC7\\u5728 MD \\u6587\\u4EF6\\u5934\\u63D2\\u5165\\u952E\\u503C\\u5BF9\\u7684\\u65B9\\u5F0F\\uFF0C\\u5B58\\u50A8\\u6709\\u5173\\u6587\\u4EF6\\u7684\\u5143\\u6570\\u636E\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u901A\\u8FC7 frontmatter \\u6765\\u5B58\\u50A8\\u6807\\u9898\\u3001\\u53D1\\u8868\\u65E5\\u671F\\u3001\\u7B80\\u4ECB\\u8FD9\\u4E9B\\u4FE1\\u606F\\uFF0C\\u683C\\u5F0F\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-md\",children:`---\ntitle: \"\\u4F7F\\u7528 Next.js \\u4E0E MDX \\u642D\\u5EFA\\u4E00\\u4E2A\\u9759\\u6001\\u535A\\u5BA2\"\ndate: \"OCT 22, 2021\"\ndesc: \"\\u82B1\\u4E86\\u51E0\\u5929\\u65F6\\u95F4\\uFF0C\\u91CD\\u65B0\\u642D\\u4E86\\u4E00\\u4E2A blog\\u3002\"\ntype: \"horse-sense\"\n---\n\n\\u6587\\u7AE0\\u6B63\\u6587\\u90E8\\u5206\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4F7F\\u7528 \",(0,n.jsx)(e.a,{href:\"https://github.com/jonschlinkert/gray-matter\",children:\"gray-matter\"}),\" \\u8FD9\\u4E2A\\u5305\\uFF0C\\u53EF\\u4EE5\\u5C06\\u8FD9\\u4E9B\\u5143\\u6570\\u636E\\u63D0\\u53D6\\u51FA\\u6765\\uFF0C\\u5177\\u4F53\\u65B9\\u6CD5\\u4E3A\\uFF0C\\u5148\\u5B89\\u88C5\\u4F9D\\u8D56\\u5305\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-bash\",children:`yarn add gray-matter -D\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u6839\\u76EE\\u5F55\\u65B0\\u5EFA\",(0,n.jsx)(e.code,{children:\"lib/posts.js\"}),\"\\u6587\\u4EF6\\uFF0C\\u5B9E\\u73B0\",(0,n.jsx)(e.code,{children:\"getAllPosts()\"}),\"\\u51FD\\u6570\\u3002\\u5927\\u81F4\\u8FC7\\u7A0B\\u4E3A\\uFF1A\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"\\u5148\\u904D\\u5386\",(0,n.jsx)(e.code,{children:\"posts/\"}),\"\\u76EE\\u5F55\\uFF0C\\u62FF\\u5230\\u6240\\u6709\\u6587\\u4EF6\\u540D\\uFF0C\\u5E76\\u8FC7\\u6EE4\\u6389\\u53EA\\u8981 MDX \\u6587\\u4EF6\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"\\u8BFB\\u53D6\\u6BCF\\u4E2A\\u6587\\u4EF6\\uFF0C\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"gray-matter\"}),\"\\u5904\\u7406\"]}),`\n`,(0,n.jsx)(e.li,{children:\"\\u5C06\\u63D0\\u53D6\\u5230\\u7684\\u6570\\u636E\\u4E0E\\u6587\\u4EF6\\u540D\\uFF08id\\uFF09\\u7EC4\\u5408\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u6309\\u53D1\\u8868\\u65E5\\u671F\\u6392\\u5E8F\\u540E\\u8FD4\\u56DE\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5177\\u4F53\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=lib/posts.js\",children:`import fs from \"fs\";\nimport path from \"path\";\nimport matter from \"gray-matter\";\n\nexport const postsDirectory = path.join(process.cwd(), \"posts\");\n// \\u83B7\\u53D6 /posts \\u76EE\\u5F55\\u4E0B\\u7684\\u6587\\u4EF6\\u540D\\uFF0C\\u8FC7\\u6EE4\\u53EA\\u8981 MDX \\u6587\\u4EF6\nconst fileNames = fs\n  .readdirSync(postsDirectory)\n  .filter((fileName) =\u003e fileName.match(/\\\\.mdx$/));\n\nexport function getAllPosts(type) {\n  let postsData = fileNames.map((fileName) =\u003e {\n    // \\u53BB\\u9664\\u540E\\u7F00\\u540D\\uFF0C\\u5269\\u4E0B\\u7684\\u6587\\u4EF6\\u540D\\u4E3A id\n    const id = fileName.replace(/\\\\.mdx$/, \"\");\n\n    // MDX \\u6587\\u4EF6\\u8DEF\\u5F84\n    const filePath = path.join(postsDirectory, fileName);\n    const fileContent = fs.readFileSync(filePath, \"utf-8\");\n\n    // \\u8BFB\\u53D6 MDX \\u6587\\u4EF6\\u5934\\u6570\\u636E\n    const { data } = matter(fileContent);\n\n    return {\n      id,\n      ...data,\n    };\n  });\n  // \\u8FD4\\u56DE\\u6307\\u5B9A\\u7C7B\\u578B\\uFF0C\\u4E14\\u6309\\u65F6\\u95F4\\u6392\\u5E8F\\u7684\\u7ED3\\u679C\n  if (type) postsData = postsData.filter((post) =\u003e post.type === type);\n\n  return postsData.sort(({ date: a }, { date: b }) =\u003e {\n    a = new Date(a);\n    b = new Date(b);\n    if (a \u003c b) {\n      return 1;\n    } else if (a \u003e b) {\n      return -1;\n    } else {\n      return 0;\n    }\n  });\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\",(0,n.jsx)(e.code,{children:\"getAllPosts(type)\"}),\"\\u65B9\\u6CD5\\u8FD8\\u5F15\\u5165\\u4E86\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"type\"}),\"\\u53C2\\u6570\\uFF0C\\u65B9\\u4FBF\\u83B7\\u53D6\\u7279\\u5B9A\\u5206\\u7C7B\\u7684\\u6587\\u7AE0\\u6570\\u636E\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7136\\u540E\\u5728\",(0,n.jsx)(e.code,{children:\"components/\"}),\"\\u76EE\\u5F55\\u4E2D\\u65B0\\u5EFA\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"PostList\"}),\"\\u7EC4\\u4EF6\\uFF0C\\u65B9\\u4FBF\\u5728\\u522B\\u7684\\u9875\\u9762\\u4E2D\\u590D\\u7528\\u3002\\u7EC4\\u4EF6\\u7528\\u5230\\u4E86 Next.js \\u81EA\\u5E26\\u7684\",(0,n.jsx)(e.code,{children:\"Link\"}),\"\\u7EC4\\u4EF6\\uFF0C\\u7528\\u6CD5\\u53EF\\u4EE5\\u770B\",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/api-reference/next/link\",children:\"\\u5B98\\u65B9\\u6587\\u6863\"}),\"\\uFF0C\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=components/PostList.jsx\",children:`import Link from \"next/link\";\n\n// postData \\u5305\\u542B\\u4E86\\u6240\\u6709\\u6587\\u7AE0\\u7684 id\\u3001\\u6807\\u9898\\u3001\\u53D1\\u8868\\u65E5\\u671F\\u3001\\u7B80\\u4ECB\nexport default function PostList({ postsData }) {\n  return (\n    \u003cul className=\"main-posts-list\"\u003e\n      {postsData.map(({ id, title, date, desc }) =\u003e (\n        \u003cli key={id}\u003e\n          \u003carticle\u003e\n            \u003cdiv className=\"posts-list-date\"\u003e{date}\u003c/div\u003e\n            \u003cLink href={\\`/post/\\${id}\\`}\u003e\n              \u003ca\u003e\n                \u003ch1\u003e{title}\u003c/h1\u003e\n              \u003c/a\u003e\n            \u003c/Link\u003e\n            \u003cp\u003e{desc}\u003c/p\u003e\n          \u003c/article\u003e\n        \u003c/li\u003e\n      ))}\n    \u003c/ul\u003e\n  );\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6700\\u540E\\u5728\",(0,n.jsx)(e.code,{children:\"pages/index.js\"}),\"\\u6587\\u4EF6\\u4E2D\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"getAllPosts\"}),\"\\u5E76\\u4F20\\u7ED9\",(0,n.jsx)(e.code,{children:\"PostList\"}),\"\\u3002\\u6CE8\\u610F\\uFF0C\\u6700\\u540E\",(0,n.jsx)(e.code,{children:\"return\"}),\"\\u51FA\\u6765\\u7684\\u6570\\u636E\\uFF0C\\u4E00\\u5B9A\\u8981\\u5305\\u5728\",(0,n.jsx)(e.code,{children:\"props{}\"}),\"\\u5BF9\\u8C61\\u4E2D\\u3002\\u5982\\u6B64\\u8FD9\\u756A\\u6298\\u817E\\u4E4B\\u540E\\uFF0C\\u6211\\u4EEC\\u7684\\u9996\\u9875\\u7EC8\\u4E8E\\u5B8C\\u6210\\u4E86\\uFF01\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",metastring:\"title=pages/index.js\",children:`import PostList from \"components/PostList\";\nimport { getAllPosts } from \"lib/posts\";\n\nexport async function getStaticProps() {\n  const postsData = getAllPosts();\n  return {\n    props: {\n      postsData,\n    },\n  };\n}\n\nexport default function Home({ postsData }) {\n  return \u003cPostList postsData={postsData} /\u003e;\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u9274\\u4E8E\\u7BC7\\u5E45\\u6709\\u70B9\\u8FC7\\u957F\\uFF0C\\u5173\\u4E8E\\u6587\\u7AE0\\u9875\\u9762\\u7684\\u751F\\u6210\\uFF0C\\u4EE3\\u7801\\u9AD8\\u4EAE\\u7684\\u914D\\u7F6E\\u7B49\\uFF0C\\u653E\\u5728\",(0,n.jsx)(e.a,{href:\"/post/how-to-build-a-static-blog-with-nextjs-and-mdx-ii\",children:\"\\u7B2C\\u4E8C\\u7BC7\\u6587\\u7AE0\"}),\"\\u91CC\\u4ECB\\u7ECD\\u3002\"]})]})}function N(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(d,t)})):d(t)}var D=N;function w(t,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return b(P);})();\n;return Component;"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"how-to-build-a-static-blog-with-nextjs-and-mdx-i"},"buildId":"5gWJ-3w7KsPABD87B5u4P","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>