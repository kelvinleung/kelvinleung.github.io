{"pageProps":{"meta":{"title":"Axios 源码阅读笔记之——徒手撕 Ajax（一）","date":"DEC 30, 2021","desc":"花了两三天的时间，把 Axios 的源码过了一遍。不得不说，Axios 的源码确实很适合小白，逻辑不复杂，也能看到很多巧妙的地方。看一遍，然后自己把核心的逻辑实现一遍，确实能学到很多东西，在此记录一下。","type":"xray"},"code":"var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),m=(t,e)=>{for(var o in e)i(t,o,{get:e[o],enumerable:!0})},s=(t,e,o,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of p(e))!f.call(t,c)&&c!==o&&i(t,c,{get:()=>e[c],enumerable:!(r=u(e,c))||r.enumerable});return t};var A=(t,e,o)=>(o=t!=null?h(g(t)):{},s(e||!t||!t.__esModule?i(o,\"default\",{value:t,enumerable:!0}):o,t)),q=t=>s(i({},\"__esModule\",{value:!0}),t);var d=x((L,a)=>{a.exports=_jsx_runtime});var y={};m(y,{default:()=>b,frontmatter:()=>w});var n=A(d()),w={title:\"Axios \\u6E90\\u7801\\u9605\\u8BFB\\u7B14\\u8BB0\\u4E4B\\u2014\\u2014\\u5F92\\u624B\\u6495 Ajax\\uFF08\\u4E00\\uFF09\",date:\"DEC 30, 2021\",desc:\"\\u82B1\\u4E86\\u4E24\\u4E09\\u5929\\u7684\\u65F6\\u95F4\\uFF0C\\u628A Axios \\u7684\\u6E90\\u7801\\u8FC7\\u4E86\\u4E00\\u904D\\u3002\\u4E0D\\u5F97\\u4E0D\\u8BF4\\uFF0CAxios \\u7684\\u6E90\\u7801\\u786E\\u5B9E\\u5F88\\u9002\\u5408\\u5C0F\\u767D\\uFF0C\\u903B\\u8F91\\u4E0D\\u590D\\u6742\\uFF0C\\u4E5F\\u80FD\\u770B\\u5230\\u5F88\\u591A\\u5DE7\\u5999\\u7684\\u5730\\u65B9\\u3002\\u770B\\u4E00\\u904D\\uFF0C\\u7136\\u540E\\u81EA\\u5DF1\\u628A\\u6838\\u5FC3\\u7684\\u903B\\u8F91\\u5B9E\\u73B0\\u4E00\\u904D\\uFF0C\\u786E\\u5B9E\\u80FD\\u5B66\\u5230\\u5F88\\u591A\\u4E1C\\u897F\\uFF0C\\u5728\\u6B64\\u8BB0\\u5F55\\u4E00\\u4E0B\\u3002\",type:\"xray\"};function l(t){let e=Object.assign({p:\"p\",a:\"a\",code:\"code\",blockquote:\"blockquote\",pre:\"pre\",h2:\"h2\",ul:\"ul\",li:\"li\",img:\"img\",strong:\"strong\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"\\u82B1\\u4E86\\u4E24\\u4E09\\u5929\\u7684\\u65F6\\u95F4\\uFF0C\\u628A Axios \\u7684\\u6E90\\u7801\\u8FC7\\u4E86\\u4E00\\u904D\\u3002\\u4E0D\\u5F97\\u4E0D\\u8BF4\\uFF0CAxios \\u7684\\u6E90\\u7801\\u786E\\u5B9E\\u5F88\\u9002\\u5408\\u5C0F\\u767D\\uFF0C\\u903B\\u8F91\\u4E0D\\u590D\\u6742\\uFF0C\\u4E5F\\u80FD\\u770B\\u5230\\u5F88\\u591A\\u5DE7\\u5999\\u7684\\u5730\\u65B9\\u3002\\u770B\\u4E00\\u904D\\uFF0C\\u7136\\u540E\\u81EA\\u5DF1\\u628A\\u6838\\u5FC3\\u7684\\u903B\\u8F91\\u5B9E\\u73B0\\u4E00\\u904D\\uFF0C\\u786E\\u5B9E\\u80FD\\u5B66\\u5230\\u5F88\\u591A\\u4E1C\\u897F\\uFF0C\\u5728\\u6B64\\u8BB0\\u5F55\\u4E00\\u4E0B\\u3002\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BF4\\u5230 Axios\\uFF0C\\u4E0D\\u5F97\\u4E0D\\u8BF4 Ajax\\uFF0C\\u5B9E\\u9645\\u4E0A Axios \\u5C31\\u662F\\u4E00\\u4E2A\\u5C01\\u88C5 Ajax \\u8BF7\\u6C42\\u7684\\u5E93\\u3002\\u800C Ajax \\u5219\\u662F Asynchronous JavaScript and XML \\u7684\\u7F29\\u5199\\u3002\\u8FD9\\u4E00\\u672F\\u8BED\\u6700\\u65E9\\u51FA\\u73B0\\u5728 2005 \\u5E74 Jesse James Garrett \\u7684\",(0,n.jsx)(e.a,{href:\"https://web.archive.org/web/20080702075113/http://www.adaptivepath.com/ideas/essays/archives/000385.php\",children:\"\\u4E00\\u7BC7\\u6587\\u7AE0\"}),\"\\u4E2D\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8981\\u77E5\\u9053\\uFF0C\\u5728\\u76D8\\u53E4\\u521D\\u5F00\\u7684\\u65F6\\u5019\\uFF0C\\u4F7F\\u7528 JS \\u53BB\\u52A8\\u6001\\u8BF7\\u6C42\\u6570\\u636E\\uFF0C\\u4E00\\u822C\\u53EA\\u80FD\\u7528\",(0,n.jsx)(e.code,{children:\"<form>\"}),\"\\u7684\",(0,n.jsx)(e.code,{children:\"action\"}),\"\\u6765\\u5411\\u6307\\u5B9A URL \\u53D1\\u8D77\\u8BF7\\u6C42\\uFF0C\\u5E76\\u4E14\\u8FD9\\u4F1A\\u5BFC\\u81F4\\u6574\\u4E2A\\u9875\\u9762\\u5237\\u65B0\\uFF0C\\u4F53\\u9A8C\\u975E\\u5E38\\u7684\\u5DEE\\u3002\\u540E\\u6765\\u5FAE\\u8F6F\\u4E3A\\u4E86\\u4F18\\u5316 Web \\u7248\\u7684 Outlook \\u4F53\\u9A8C\\uFF0C\\u5728 IE \\u4E2D\\u589E\\u52A0\\u4E86\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\uFF0C\\u4EE4\\u5230 JS \\u80FD\\u591F\\u5F02\\u6B65\\u8BF7\\u6C42\\u6570\\u636E\\u3002\\u5176\\u5B83\\u6D4F\\u89C8\\u5668\\u5382\\u5BB6\\u7EB7\\u7EB7\\u8DDF\\u8FDB\\uFF0C\\u5206\\u522B\\u5B9E\\u73B0\\u4E86\\u81EA\\u5DF1\\u7248\\u672C\\u7684\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\u529F\\u80FD\\uFF0C\\u968F\\u540E\\u66F4\\u662F\\u88AB\\u7EB3\\u5165\\u4E86 W3C \\u89C4\\u8303\\u4E2D\\u3002\\u5F53\\u7136\\uFF0C\\u5C06\\u8FD9\\u9879\\u6280\\u672F\\u53D1\\u626C\\u5149\\u5927\\u7684\\u662F\\u6211\\u4EEC\\u719F\\u77E5\\u7684 Gmail \\u4E0E Google Maps\\uFF0C\\u5E76\\u7531\\u6B64\\u6253\\u5F00\\u4E86 Web 2.0 \\u65F6\\u4EE3\\u7684\\u5927\\u95E8\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4EE5\\u4E0A\\u8FD9\\u6BB5\\u5386\\u53F2\\u611F\\u5174\\u8DA3\\u7684\\u53EF\\u4EE5\\u770B\\u4E0B\",(0,n.jsx)(e.a,{href:\"https://thehistoryoftheweb.com/what-does-ajax-even-stand-for/\",children:\"\\u8FD9\\u7BC7\\u6587\\u7AE0\"}),\"\\u3002\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u503C\\u5F97\\u6CE8\\u610F\\u7684\\u662F\\uFF0CAjax \\u8FD9\\u4E00\\u672F\\u8BED\\uFF0C\\u5E76\\u4E0D\\u662F\\u5355\\u5355\\u6307\\u67D0\\u4E00\\u9879\\u6280\\u672F\\uFF0C\\u800C\\u662F\\u4E00\\u7EC4\\u6280\\u672F\\u7684\\u7EC4\\u5408\\u8FD0\\u7528\\uFF0CMDN \\u4E2D\\u5BF9\\u5B83\\u7684\\u5B9A\\u4E49\\u63CF\\u8FF0\\u4E3A\\uFF1A\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:'Asynchronous JavaScript and XML, while not a technology in itself, is a term coined in 2005 by Jesse James Garrett, that describes a \"new\" approach to using a number of existing technologies together, including HTML or XHTML, CSS, JavaScript, DOM, XML, XSLT, and most importantly the XMLHttpRequest object. When these technologies are combined in the Ajax model, web applications are able to make quick, incremental updates to the user interface without reloading the entire browser page. This makes the application faster and more responsive to user actions.'}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u800C\\u5728\\u72ED\\u4E49\\u7684\\u8BED\\u5883\\u4E2D\\uFF0CAjax \\u4E00\\u822C\\u6307\\u7684\\u5C31\\u662F\\u201C\\u53D1\\u8D77\\u5F02\\u6B65\\u8BF7\\u6C42\\u201D\\u3002\\u4F7F\\u7528 JS \\u53D1\\u8D77\\u4E00\\u4E2A Ajax \\u8BF7\\u6C42\\u5F88\\u7B80\\u5355\\uFF0C\\u53EA\\u662F\\u6709\\u70B9\\u7E41\\u7410\\uFF0C\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const xhr = new XMLHttpRequest();\n\n// \\u521D\\u59CB\\u5316\\u8BF7\\u6C42\nxhr.open(\"GET\", \"https://www.xxx.com/api\");\n// \\u8BBE\\u7F6E\\u8BF7\\u6C42\\u5934\nxhr.setRequestHeader(\"X-Requested-With\": \"XMLHttpRequest\");\n// \\u76D1\\u542C\\u8BF7\\u6C42\\u72B6\\u6001\nxhr.onreadystatechange = function () {\n  if (xhr.readyState !== 4) {\n    return;\n  }\n  if (xhr.status >= 200 && xhr.status < 300) {\n    console.log(xhr.responseText);\n  }\n};\n// \\u53D1\\u9001\\u8BF7\\u6C42\nxhr.send();\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u6BCF\\u6B21\\u8BF7\\u6C42\\u90FD\\u9700\\u8981\\u5982\\u6B64\\u7E41\\u7410\\u7684\\u914D\\u7F6E\\uFF0C\\u5B9E\\u5728\\u6CA1\\u6709\\u5FC5\\u8981\\u3002\\u63A5\\u4E0B\\u6765\\u6211\\u4EEC\\u4ECE\\u96F6\\u5F00\\u59CB\\uFF0C\\u5C01\\u88C5\\u4E00\\u4E2A\\u7B80\\u5355\\u6613\\u7528\\u7684 Ajax \\u8BF7\\u6C42\\u5E93\\uFF0C\\u5B9E\\u73B0\\u7B80\\u5316\\u7248\\u7684 Axios\\u3002\"}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u9762\\u5411\\u8C03\\u7528\\u8BBE\\u8BA1\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u4E4B\\u524D\\u505A\\u4EA7\\u54C1\\u7684\\u65F6\\u5019\\uFF0C\\u5F53\\u6211\\u4EEC\\u9700\\u8981\\u53BB\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u529F\\u80FD\\u65F6\\uFF0C\\u603B\\u662F\\u4F1A\\u63D0\\u5230\\u201C\\u4EE5\\u7528\\u6237\\u4E3A\\u4E2D\\u5FC3\\u201D\\uFF0C\\u201C\\u9762\\u5411\\u7528\\u6237\\u201D\\u8FD9\\u4E9B\\u672F\\u8BED\\u3002\\u56E0\\u4E3A\\u4EA7\\u54C1\\u6700\\u7EC8\\u662F\\u8981\\u4EA4\\u4ED8\\u7ED9\\u7528\\u6237\\u4F7F\\u7528\\uFF0C\\u624D\\u4F1A\\u4EA7\\u751F\\u4EF7\\u503C\\u3002\\u56E0\\u6B64\\u8981\\u9762\\u5411\\u7528\\u6237\\u7684\\u4F7F\\u7528\\u573A\\u666F\\u3001\\u9700\\u6C42\\u53BB\\u8BBE\\u8BA1\\u3002\\u800C\\u7F16\\u5199\\u4E00\\u4E2A\\u5E93\\uFF0C\\u540C\\u6837\\u9700\\u8981\\u9762\\u5411\\u201C\\u7528\\u6237\\u201D\\u8BBE\\u8BA1\\uFF0C\\u8FD9\\u4E2A\\u7528\\u6237\\uFF0C\\u6307\\u7684\\u662F\\u8FD9\\u4E2A\\u5E93\\u7684\\u8C03\\u7528\\u8005\\u3002\\u56E0\\u6B64\\u5F53\\u6211\\u4EEC\\u8BBE\\u8BA1 API \\u65F6\\uFF0C\\u8981\\u8003\\u8651\\u7684\\u662F\\u8C03\\u7528\\u65B9\\u662F\\u5982\\u4F55\\u8C03\\u7528\\u7684\\u3002\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u90A3\\u4E48\\u4F5C\\u4E3A\\u8C03\\u7528\\u8005\\uFF0C\\u6211\\u4EEC\\u5E0C\\u671B\\u5982\\u679C\\u8C03\\u7528\\u8FD9\\u4E2A\\u7B80\\u5316\\u7248\\u7684 Axios \\u5462\\u3002\\u5F53\\u7136\\u662F\\u8D8A\\u7B80\\u5355\\u8D8A\\u597D\\uFF0C\\u6700\\u597D\\u662F\\u80FD\\u4E0D\\u8BBE\\u7F6E\\u7684\\u5C31\\u4E0D\\u7528\\u8BBE\\u7F6E\\uFF0C\\u76F4\\u63A5\\u5C31\\u53EF\\u4EE5\\u53D1\\u8D77\\u8BF7\\u6C42\\u3002\\u540C\\u65F6\\uFF0C\\u80FD\\u63D0\\u4F9B\\u591A\\u79CD\\u8C03\\u7528\\u65B9\\u5F0F\\uFF0C\\u4EE5\\u6EE1\\u8DB3\\u4E0D\\u540C\\u8C03\\u7528\\u8005\\u7684\\u4F7F\\u7528\\u4E60\\u60EF\\u3002Axios \\u7684\\u8C03\\u7528\\u65B9\\u6CD5\\u5C31\\u975E\\u5E38\\u591A\\u6837\\uFF0C\\u4F8B\\u5982\\uFF1A\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// \\u9ED8\\u8BA4\\u60C5\\u51B5\\u4E0B\\u76F4\\u63A5\\u53D1\\u8D77 GET \\u8BF7\\u6C42\naxios(\"https://www.xxx.com/api\").then((res) => console.log(res.data));\n\n// \\u4F7F\\u7528 get \\u65B9\\u6CD5\\u53D1\\u8D77\\u8BF7\\u6C42\naxios.get(\"https://www.xxx.com/api\").then((res) => console.log(res.data));\n\n// \\u6307\\u5B9A\\u53C2\\u6570\naxios({\n  method: \"get\",\n  url: \"https://www.xxx.com/api\",\n}).then((res) => console.log(res.data));\n\n// \\u9644\\u52A0\\u6307\\u5B9A\\u53C2\\u6570\naxios(\"https://www.xxx.com/api\", { method: \"get\" }).then((res) =>\n  console.log(res.data)\n);\n\n// \\u8FD8\\u53EF\\u4EE5\\u901A\\u8FC7\\u5B9E\\u4F8B\\u53BB\\u8C03\\u7528\nconst instance = axios.create({\n  baseURL: \"https://www.xxx.com/api\",\n  timeout: 1000,\n  headers: { \"X-Custom-Header\": \"foobar\" },\n});\n// \\u5B9E\\u4F8B\\u65B9\\u6CD5\ninstance.get(\"login\");\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u5C0F\\u7ED3\\u4E00\\u4E0B\\u5C31\\u662F\\uFF1A\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"\\u4F5C\\u4E3A\\u51FD\\u6570\\u76F4\\u63A5\\u8C03\\u7528\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4F5C\\u4E3A\\u5BF9\\u8C61\\u65B9\\u6CD5\\u8C03\\u7528\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u53EF\\u4EE5\\u521B\\u5EFA\\u5B9E\\u4F8B\\uFF0C\\u901A\\u8FC7\\u5B9E\\u4F8B\\u65B9\\u6CD5\\u8C03\\u7528\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u4F7F\\u7528 Promise \\u94FE\\u5F0F\\u8C03\\u7528\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u65B9\\u6CD5\\u7684\\u53C2\\u6570\\u6709\\u591A\\u79CD\\u5F62\\u5F0F\"}),`\n`,(0,n.jsx)(e.li,{children:\"\\u63D0\\u4F9B\\u7F3A\\u7701\\u7684\\u9ED8\\u8BA4\\u53C2\\u6570\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u51FD\\u6570\\u4E0E\\u5BF9\\u8C61\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Axios \\u65E2\\u53EF\\u4EE5\\u4F5C\\u4E3A\\u51FD\\u6570\\u76F4\\u63A5\\u8C03\\u7528\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u4F5C\\u4E3A\\u4E00\\u4E2A\\u5BF9\\u8C61\\uFF0C\\u901A\\u8FC7\\u5B83\\u7684\\u65B9\\u6CD5\\u6765\\u8C03\\u7528\\uFF0C\\u751A\\u81F3\\u8FD8\\u53EF\\u4EE5\\u8C03\\u7528\\u8BE5\\u5BF9\\u8C61\\u7684\",(0,n.jsx)(e.code,{children:\"create()\"}),\"\\u65B9\\u6CD5\\uFF0C\\u521B\\u5EFA\\u51FA\\u5B9E\\u4F8B\\uFF0C\\u7136\\u540E\\u901A\\u8FC7\\u5B9E\\u4F8B\\u7684\\u65B9\\u6CD5\\u6765\\u8C03\\u7528\\u3002\\u90A3\\u4E48\\u5B83\\u662F\\u600E\\u6837\\u505A\\u5230\\u7684\\u5462\\uFF1F\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u77E5\\u9053\\uFF0C\\u5728 JS \\u4E2D\\uFF0C\\u201C\\u4E07\\u7269\\u7686\\u5BF9\\u8C61\\u201D\\uFF0C\\u6240\\u4EE5\\u5373\\u4F7F\\u662F\\u51FD\\u6570\\uFF0C\\u5B83\\u5B9E\\u9645\\u4E0A\\u4E5F\\u662F\\u4E00\\u4E2A\",(0,n.jsx)(e.code,{children:\"Function\"}),\"\\u5BF9\\u8C61\\u3002\\u56E0\\u6B64\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u7684\\u672C\\u4F53\\uFF0C\\u662F\\u4E00\\u4E2A\\u51FD\\u6570\\uFF08\\u5BF9\\u8C61\\uFF09\\uFF0C\\u8FD9\\u4E2A\\u5BF9\\u8C61\\uFF08\\u51FD\\u6570\\uFF09\\u8FD8\\u62E5\\u6709\\u50CF\",(0,n.jsx)(e.code,{children:\"get()\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"create()\"}),\"\\u7B49\\u65B9\\u6CD5\\uFF0C\\u539F\\u7406\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`// axios \\u4F5C\\u4E3A\\u4E00\\u4E2A\\u51FD\\u6570\nconst axios = function request(config) {\n  console.log(\"as a function\");\n};\n// axios \\u4F5C\\u4E3A\\u4E00\\u4E2A\\u5BF9\\u8C61\naxios.get = function get(config) {\n  console.log(\"as a method of an object\");\n};\n\naxios(); // \"as a function\"\naxios.get(); // \"as a method of an object\"\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u7531\\u4E8E\",(0,n.jsx)(e.code,{children:\"get()\"}),\"\\u65B9\\u6CD5\\u5B9E\\u9645\\u4E0A\\u662F\",(0,n.jsx)(e.code,{children:'request({ method: \"get\" })'}),\"\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u7528\\u9762\\u5411\\u5BF9\\u8C61\\u7684\\u65B9\\u5F0F\\u6765\\u5B9E\\u73B0\\u3002\\u7B80\\u5316\\u540E\\u7684\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function Axios(instanceConfig) {\n  // \\u9ED8\\u8BA4\\u7684\\u914D\\u7F6E\n  this.defaults = instanceConfig;\n  // \\u62E6\\u622A\\u5668\\uFF0C\\u540E\\u9762\\u6709\\u8BB2\\uFF0C\\u5148\\u7B80\\u5316\\u7701\\u7565\n  this.interceptors = {};\n}\n\nAxios.prototype.request = function request(configOrUrl, config) {\n  /**\n   * \\u5BF9 config \\u8FDB\\u884C\\u5904\\u7406\\uFF0C\\u540E\\u9762\\u6709\\u8BB2\n   */\n  // \\u5C06\\u8BF7\\u6C42\\u6D3E\\u53D1\\u7ED9\\u5BF9\\u5E94\\u7684\\u9002\\u914D\\u5668\\uFF0C\\u540E\\u9762\\u4F1A\\u6709\\u8BB2\\u5230\n  return dispatchRequest(config);\n};\n\n[\"delete\", \"get\"].forEach(function forEachMethodWithoutData(method) {\n  Axios.prototype[method] = function (url, config) {\n    return this.request(\n      mergeConfig(config || {}, { method, url, data: (config || {}).data })\n    );\n  };\n});\n\n[\"post\", \"put\"].forEach(function forEachMethodWithData(method) {\n  Axios.prototype[method] = function (url, data, config) {\n    return this.request(mergeConfig(config || {}, { method, url, data }));\n  };\n});\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8BF7\\u6C42\\u51FD\\u6570\",(0,n.jsx)(e.code,{children:\"request()\"}),\"\\u6302\\u8F7D\\u5728\",(0,n.jsx)(e.code,{children:\"Axios\"}),\"\\u7684\\u539F\\u578B\\u4E0A\\uFF0C\\u51FD\\u6570\\u5185\\u90E8\\u8C03\\u7528\\u4E86\",(0,n.jsx)(e.code,{children:\"dispatchRequest()\"}),\"\\u51FD\\u6570\\uFF0C\\u4F5C\\u7528\\u662F\\u5C06\\u8BF7\\u6C42\\u6D3E\\u53D1\\u7ED9\\u5BF9\\u5E94\\u7684\\u9002\\u914D\\u5668\\uFF0C\\u540E\\u9762\\u4F1A\\u6709\\u8BB2\\u5230\\u3002\",(0,n.jsx)(e.code,{children:\"Axios\"}),\"\\u7684\\u539F\\u578B\\u4E0A\\u8FD8\\u6302\\u8F7D\\u6709\",(0,n.jsx)(e.code,{children:\"delete()\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"get()\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"post()\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"put()\"}),\"\\u7B49\\u5E38\\u7528\\u7684 HTTP \\u8BF7\\u6C42\\u65B9\\u6CD5\\uFF0C\\u5B83\\u4EEC\\u88AB\\u5206\\u6210\\u4E24\\u7EC4\\uFF0C\\u533A\\u522B\\u662F\\u8BF7\\u6C42\\u65F6\\u662F\\u5426\\u5E26\\u6709\",(0,n.jsx)(e.code,{children:\"data\"}),\"\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"Axios\"}),\"\\u6784\\u9020\\u51FD\\u6570\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u751F\\u6210\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u5BF9\\u8C61\\uFF08\\u51FD\\u6570\\uFF09\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  // instance \\u5373 request\n  const instance = Axios.prototype.request.bind(context);\n  // \\u5C06 Axios \\u539F\\u578B\\u4E0A\\u7684\\u65B9\\u6CD5\\u52A0\\u5230 instance \\u4E0A\n  utils.extend(instance, Axios.prototype, context);\n  // \\u5C06 Axios \\u5B9E\\u4F8B\\u4E0A\\u7684\\u5C5E\\u6027\\u52A0\\u5230 instance \\u4E0A\n  utils.extend(instance, context);\n  // instance \\u5373\\u4E3A\\u51FD\\u6570\\uFF0C\\u53C8\\u4E3A\\u5BF9\\u8C61\n  return instance;\n}\n\n// \\u9ED8\\u8BA4\\u7684\\u53C2\\u6570 defaults\nconst axios = createInstance(defaults);\n\naxios.create = function create(instanceConfig) {\n  // mergeConfig \\u65B9\\u6CD5\\u7528\\u4E8E\\u5408\\u5E76\\u914D\\u7F6E\\uFF0C\\u540E\\u9762\\u6709\\u8BB2\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5DE5\\u5177\\u65B9\\u6CD5\",(0,n.jsx)(e.code,{children:\"extend(a, b)\"}),\"\\u7684\\u4F5C\\u7528\\u662F\\u5C06\",(0,n.jsx)(e.code,{children:\"b\"}),\"\\u5BF9\\u8C61\\u81EA\\u6709\\u7684\\u5C5E\\u6027\\u4E0E\\u65B9\\u6CD5\\uFF0C\\u62F7\\u8D1D\\u7ED9\",(0,n.jsx)(e.code,{children:\"a\"}),\"\\u5BF9\\u8C61\\uFF0C\\u7B80\\u5316\\u7248\\u7684\\u5B9E\\u73B0\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function extend(a, b, thisArg) {\n  for (const key in b) {\n    if (b.hasOwnProperty(key)) {\n      if (thisArg && typeof b[key] === \"function\") {\n        a[key] = b[key].bind(thisArg);\n      } else {\n        a[key] = b[key];\n      }\n    }\n  }\n  return a;\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B9E\\u9645\\u4E0A\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u7684\\u672C\\u4F53\\uFF08\",(0,n.jsx)(e.code,{children:\"instance\"}),\"\\uFF09\\u5C31\\u662F\",(0,n.jsx)(e.code,{children:\"Axios.prototype.request()\"}),\"\\u51FD\\u6570\\uFF08\\u5BF9\\u8C61\\uFF09\\u3002\\u5B83\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"extend()\"}),\"\\u65B9\\u6CD5\\u83B7\\u5F97\\u4E86\",(0,n.jsx)(e.code,{children:\"Axios\"}),\"\\u539F\\u578B\\u4E0A\\u7684\\u6240\\u6709\\u65B9\\u6CD5\\u53CA Axios \\u5B9E\\u4F8B\",(0,n.jsx)(e.code,{children:\"context\"}),\"\\u4E0A\\u7684\\u6240\\u6709\\u5C5E\\u6027\\uFF08\\u5373\",(0,n.jsx)(e.code,{children:\"defaults\"}),\"\\u4E0E\",(0,n.jsx)(e.code,{children:\"interceptors\"}),\"\\u7B49\\u5C5E\\u6027\\uFF09\\u3002\\u5B83\\u81EA\\u8EAB\\u8FD8\\u589E\\u52A0\\u4E86\",(0,n.jsx)(e.code,{children:\"create()\"}),\"\\u65B9\\u6CD5\\uFF0C\\u8BE5\\u65B9\\u6CD5\\u901A\\u8FC7\\u8C03\\u7528\",(0,n.jsx)(e.code,{children:\"createInstance()\"}),\"\\u65B9\\u6CD5\\uFF0C\\u5229\\u7528\\u4F20\\u5165\\u7684\\u914D\\u7F6E\\u53C2\\u6570\\uFF0C\\u751F\\u6210\\u4E86\\u65B0\\u7684\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u5BF9\\u8C61\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u56E0\\u6B64\\uFF0C\\u6211\\u4EEC\\u6700\\u7EC8\\u4F7F\\u7528\\u7684\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\uFF0C\\u65E2\\u662F\\u4E00\\u4E2A\\u51FD\\u6570\\uFF0C\\u540C\\u65F6\\u4E5F\\u662F\\u4E00\\u4E2A\\u5E26\\u6709\\u5404\\u79CD\\u522B\\u540D\\u65B9\\u6CD5\\u7684\\u5BF9\\u8C61\\u3002\",(0,n.jsx)(e.code,{children:\"Axios\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u7684\\u5173\\u7CFB\\u5982\\u4E0B\\u56FE\\uFF1A\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/images/recreate-axios-from-scratch/relation.png\",alt:\"relation\"})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u9ED8\\u8BA4\\u53C2\\u6570\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4EBA\\u90FD\\u662F\\u61D2\\u7684\\uFF0C\\u4E3A\\u4E86\\u80FD\\u8FBE\\u5230\\u201C\\u80FD\\u4E0D\\u914D\\u7F6E\\u5C31\\u4E0D\\u914D\\u7F6E\\u201D\\u7684\\u76EE\\u7684\\uFF0C\\u6211\\u4EEC\\u9700\\u8981\\u63D0\\u4F9B\\u9ED8\\u8BA4\\u7684\\u53C2\\u6570\\u914D\\u7F6E\\u9879\\u3002\\u521D\\u59CB\\u5316\",(0,n.jsx)(e.code,{children:\"axios\"}),\"\\u5BF9\\u8C61\\u65F6\\u4F20\\u5165\\u7684\",(0,n.jsx)(e.code,{children:\"defaults\"}),\"\\u5BF9\\u8C61\\u4E2D\\u5C31\\u5305\\u542B\\u4E86\\u6240\\u6709\\u53C2\\u6570\\u7684\\u9ED8\\u8BA4\\u503C\\uFF0C\\u5982\\u8D85\\u65F6\\u65F6\\u95F4\\u3001\\u8BF7\\u6C42\\u5934\\u7B49\\u3002\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`const defaults = {\n  /*\n   * \\u7701\\u7565\n   */\n  timeout: 0,\n  headers: {\n    common: {\n      Accept: \"application/json, text/plain, */*\",\n    },\n  },\n};\n// \\u521D\\u59CB\\u5316\\u65F6\\u4F20\\u5165\\u9ED8\\u8BA4\\u53C2\\u6570\nconst axios = createInstance(defaults);\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u6211\\u4EEC\\u5728\\u53D1\\u8D77\\u8BF7\\u6C42\\u65F6\\uFF0C\\u5982\\u679C\\u4E0D\\u6307\\u5B9A\\u65B9\\u6CD5\\u7C7B\\u578B\\uFF0C\\u9ED8\\u8BA4\\u662F\\u201CGET\\u201D\\u65B9\\u6CD5\\uFF0C\\u540C\\u65F6\\uFF0C\\u8BF7\\u6C42\\u7684\\u53C2\\u6570\\uFF0C\\u65E2\\u53EF\\u4EE5\\u662F\",(0,n.jsx)(e.code,{children:\"url\"}),\"\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u662F\",(0,n.jsx)(e.code,{children:\"config\"}),\"\\u5BF9\\u8C61\\uFF0C\\u8FD9\\u4E9B\\u903B\\u8F91\\u7684\\u5904\\u7406\\u90FD\\u662F\\u5728\",(0,n.jsx)(e.code,{children:\"Axios.prototype.request()\"}),\"\\u65B9\\u6CD5\\u4E2D\\u5B9E\\u73B0\\u7684\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`Axios.prototype.request = function request(configOrUrl, config) {\n  // \\u7B2C\\u4E00\\u4E2A\\u53C2\\u6570\\u4E3A string \\u65F6\\uFF08url\\uFF09\n  if (typeof configOrUrl === \"string\") {\n    config = config || {};\n    config.url = configOrUrl;\n  } else {\n    config = configOrUrl || {};\n  }\n  // \\u5FC5\\u987B\\u8981\\u6709 url\\uFF0C\\u5426\\u5219\\u62A5\\u9519\n  if (!config.url) {\n    throw new Error(\"Url not valid\");\n  }\n  // \\u8BBE\\u7F6E method \\u7684\\u9ED8\\u8BA4\\u503C\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = \"get\";\n  }\n  // \\u5408\\u5E76\\u914D\\u7F6E\n  config = mergeConfig(this.defaults, config);\n  // \\u5C06\\u8BF7\\u6C42\\u6D3E\\u53D1\\u7ED9\\u5BF9\\u5E94\\u7684\\u9002\\u914D\\u5668\\uFF0C\\u540E\\u9762\\u4F1A\\u6709\\u8BB2\\u5230\n  return dispatchRequest(config);\n};\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5176\\u4E2D\",(0,n.jsx)(e.code,{children:\"mergeConfig(a, b)\"}),\"\\u65B9\\u6CD5\\u7528\\u4E8E\\u5408\\u5E76\\u914D\\u7F6E\\uFF0C\",(0,n.jsx)(e.code,{children:\"b\"}),\"\\u4E2D\\u4E0E\",(0,n.jsx)(e.code,{children:\"a\"}),\"\\u76F8\\u540C\\u7684\\u914D\\u7F6E\\u9879\\uFF0C\\u4F1A\\u76F4\\u63A5\\u8986\\u76D6\\uFF08\",(0,n.jsx)(e.code,{children:\"b\"}),\"\\u4F18\\u5148\\u4E8E\",(0,n.jsx)(e.code,{children:\"a\"}),\"\\uFF09\\uFF0C\\u65B9\\u6CD5\\u7684\\u7B80\\u5316\\u7248\\u5B9E\\u73B0\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function mergeConfig(config1, config2) {\n  return { ...config1, ...config2 };\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"mergeConfig()\"}),\"\\u65B9\\u6CD5\\u5728\\u5F88\\u591A\\u5730\\u65B9\\u6709\\u4F7F\\u7528\\u5230\\uFF0C\\u56E0\\u6B64\\u8FD9\\u4E9B\\u914D\\u7F6E\\u95F4\\u4F1A\\u76F8\\u4E92\\u8986\\u76D6\\uFF0C\\u5B83\\u4EEC\\u95F4\\u7684\\u4F18\\u5148\\u7EA7\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`/* \\u6700\\u4F4E\\uFF1A\\u4E0D\\u8BBE\\u7F6E\\u65F6\\uFF0C\\u9ED8\\u8BA4 timeout \\u4E3A 0\n * defaults = { timeout: 0 }\n */\n// \\u4F4E\naxios.defaults.timeout = 1000;\n// \\u4E2D\nconst instance = axios.create({ timeout: 2000 });\n// \\u9AD8\ninstance.defaults.timeout = 3000;\n// \\u6700\\u9AD8\ninstance.get(\"https://www.xxx.com/api\", { timeout: 5000 });\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u9002\\u914D\\u5668\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Axios \\u65E2\\u53EF\\u4EE5\\u5728\\u6D4F\\u89C8\\u5668\\u73AF\\u5883\\u4E2D\\u4F7F\\u7528\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u5728 Node \\u4E2D\\u4F7F\\u7528\\uFF0C\\u539F\\u56E0\\u662F\\u4F7F\\u7528\\u4E86\\u9002\\u914D\\u5668\\uFF0C\\u5F53\\u6211\\u4EEC\\u901A\\u8FC7\",(0,n.jsx)(e.code,{children:\"dispatchRequest()\"}),\"\\u65B9\\u6CD5\\u6D3E\\u53D1\\u8BF7\\u6C42\\u65F6\\uFF0C\\u4F1A\\u5148\\u6839\\u636E\\u4E0D\\u540C\\u7684\\u73AF\\u5883\\uFF0C\\u52A0\\u8F7D\\u4E0D\\u540C\\u7684\\u8BF7\\u6C42\\u65B9\\u6CD5\\u3002\\u5176\\u4E2D\\u6D4F\\u89C8\\u5668\\u7AEF\\u4F7F\\u7528\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\uFF0C\\u800C\\u5728 Node \\u4E2D\\u5219\\u4F7F\\u7528\\u7684\\u662F\",(0,n.jsx)(e.code,{children:\"http\"}),\"\\u6A21\\u5757\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5728\\u8FD9\\u91CC\\uFF0C\\u6211\\u4EEC\\u5148\\u4E0D\\u8003\\u8651 Node \\u73AF\\u5883\\u3002\\u4F46\\u8003\\u8651\\u5230\\u7EC3\\u624B\\u7684\\u9700\\u8981\\uFF0C\\u9002\\u914D\\u5668\\u7684\\u90E8\\u5206\\u8FD8\\u662F\\u5B9E\\u73B0\\u4E86\\uFF0C\\u4F46\\u76F4\\u63A5\\u5FFD\\u7565\\u6389\\u73AF\\u5883\\u5224\\u65AD\\u7684\\u90E8\\u5206\\uFF0C\\u9ED8\\u8BA4\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\u9002\\u914D\\u5668\\uFF0C\\u7B80\\u5316\\u540E\\u7684\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function dispatchRequest(config) {\n  const adapter = config.adapter || defaults.adapter;\n  return adapter(config).then(\n    (response) => {\n      return response;\n    },\n    (reason) => {\n      return Promise.reject(reason);\n    }\n  );\n}\n`})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u8BF7\\u6C42\\u4ECE\",(0,n.jsx)(e.code,{children:\"request()\"}),\"\\u5230\",(0,n.jsx)(e.code,{children:\"dispatchRequest()\"}),\"\\uFF0C\\u6700\\u7EC8\\u662F\\u7531\",(0,n.jsx)(e.code,{children:\"adapter()\"}),\"\\u6765\\u53D1\\u8D77\\u3002\\u4E4B\\u6240\\u4EE5\\u8FD9\\u4E48\\u7ED5\\uFF0C\\u539F\\u56E0\\u4E00\\u4E2A\\u662F\\u4E3A\\u4E86\\u4F7F\\u7528\\u62E6\\u622A\\u5668\\uFF0C\\u8FD9\\u4E2A\\u540E\\u9762\\u518D\\u8BB2\\uFF1B\\u53E6\\u4E00\\u4E2A\\u5219\\u662F\\u9002\\u914D\\u4E0D\\u540C\\u7684\\u73AF\\u5883\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u8FD9\\u91CC\\u518D\\u8865\\u5145\\u4E00\\u70B9\\uFF0C\\u5BF9\\u4E8E\\u73AF\\u5883\\u7684\\u5224\\u65AD\\uFF0CAxios \\u4E2D\\u662F\\u5229\\u7528\\u4E86 Node \\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"process\"}),\"\\uFF0C\\u4EE3\\u7801\\u53EF\\u4EE5\\u5728\\u6E90\\u7801\\u4E2D\\u7684\",(0,n.jsx)(e.code,{children:\"lib/defaults.js\"}),\"\\u6587\\u4EF6\\u4E2D\\u627E\\u5230\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== \"undefined\") {\n    // For browsers use XHR adapter\n    adapter = require(\"./adapters/xhr\");\n  } else if (\n    typeof process !== \"undefined\" &&\n    Object.prototype.toString.call(process) === \"[object process]\"\n  ) {\n    // For node use HTTP adapter\n    adapter = require(\"./adapters/http\");\n  }\n  return adapter;\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"Promisify\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u4E0A\\u9762\\u63D0\\u5230\\uFF0C\\u6700\\u7EC8\\u53D1\\u8D77\\u8BF7\\u6C42\\u7684\\uFF0C\\u662F\\u9002\\u914D\\u5668\\uFF0C\\u5BF9\\u4E8E\\u6D4F\\u89C8\\u5668\\u73AF\\u5883\\uFF0C\\u5C31\\u662F\",(0,n.jsx)(e.code,{children:\"xhrAdapter()\"}),\"\\uFF0C\\u5176\\u5B9E\\u5C31\\u662F\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\u6765\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF08\\u7ED5\\u4E86\\u8FD9\\u4E48\\u4E45\\uFF0C\\u7EC8\\u4E8E\\u7ED5\\u56DE\\u6765\\u4E86\\uFF09\\u3002\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u539F\\u751F\\u7684\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\u4F7F\\u7528\\u56DE\\u8C03\\u51FD\\u6570\\u6765\\u76D1\\u542C\\u5404\\u79CD\\u4E8B\\u4EF6\\uFF0C\\u5BB9\\u6613\\u9020\\u6210\\u56DE\\u8C03\\u5730\\u72F1\\uFF0C\\u4E5F\\u4E0D\\u5229\\u4E8E\\u94FE\\u5F0F\\u8C03\\u7528\\u3002\\u6211\\u4EEC\\u9700\\u8981\\u5C06\\u5176\\u8F6C\\u5316\\u4E3A\\u66F4\\u73B0\\u4EE3\\u3001\\u66F4\\u201C\\u79D1\\u5B66\\u201D\\u7684 Promise\\uFF0C\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\uFF0C\\u53EB\\u505A Promise \\u5316\\uFF08Promisify\\uFF09\\u3002Promisify \\u662F\\u5E38\\u89C1\\u7684\\u9762\\u8BD5\\u9898\\uFF0C\\u539F\\u7406\\u5F88\\u7B80\\u5355\\uFF0C\\u5F53\\u6210\\u529F\\u65F6\",(0,n.jsx)(e.code,{children:\"resolve()\"}),\"\\uFF0C\\u5F53\\u5931\\u8D25/\\u51FA\\u9519\\u65F6\",(0,n.jsx)(e.code,{children:\"reject()\"}),\"\\u3002\\u6211\\u4EEC\\u628A\\u4E0A\\u9762\\u539F\\u751F\\u7684 xhr \\u8BF7\\u6C42 Promise \\u5316\\uFF0C\\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`function xhrAdapter(config) {\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(config.method.toUpperCase(), config.url);\n    request.onreadystatechange = function handleLoad() {\n      if (request.readyState !== 4) {\n        return;\n      }\n      if (request.status >= 200 && request.status < 300) {\n        // \\u5F53\\u8FD4\\u56DE\\u7801\\u4E3A 2xx \\u65F6\\u5373\\u6210\\u529F\n        resolve(request.response);\n      } else {\n        // \\u5426\\u5219\\u4E3A\\u5931\\u8D25\n        reject(request.status);\n      }\n    };\n    request.send();\n  });\n}\n`})}),`\n`,(0,n.jsx)(e.h2,{children:\"\\u5C0F\\u7ED3\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5230\\u6B64\\u4E3A\\u6B62\\uFF0C\\u6211\\u4EEC\\u5C31\\u5B8C\\u6210\\u4E86\",(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"}),\"\\u7684\\u7B80\\u5355\\u5C01\\u88C5\\uFF0C\\u5B9E\\u73B0\\u4E86\\u4E00\\u4E2A\\u7B80\\u5316\\u7248\\u7684 Axios\\u3002\\u6574\\u4E2A\\u8BF7\\u6C42\\u7684\\u53D1\\u8D77\\u6D41\\u7A0B\\u5982\\u4E0B\\u56FE\\u6240\\u793A\\uFF1A\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/images/recreate-axios-from-scratch/flow.png\",alt:\"flow\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u5B8C\\u6574\\u4EE3\\u7801\\u53EF\\u4EE5\\u5728\",(0,n.jsx)(e.a,{href:\"https://github.com/kelvinleung/re-create.js/tree/main/axios\",children:\"\\u8FD9\\u91CC\\u67E5\\u770B\"}),\"\\u3002\\u63A5\\u4E0B\\u6765\\u6211\\u4EEC\\u8FD8\\u8981\\u624B\\u6495\",(0,n.jsx)(e.strong,{children:\"\\u62E6\\u622A\\u5668\"}),\"\\u4E0E\",(0,n.jsx)(e.strong,{children:\"\\u53D6\\u6D88\\u8BF7\\u6C42\"}),\"\\uFF0C\\u8BE6\\u89C1\\u7B2C\\u4E8C\\u90E8\\u5206\\u3002\"]})]})}function j(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(l,t)})):l(t)}var b=j;return q(y);})();\n;return Component;"},"__N_SSG":true}